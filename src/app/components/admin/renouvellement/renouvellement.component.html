<div class="min-h-screen w-full bg-gradient-to-br from-[#EFF6FF] to-[#F0FDF4]">
    <div class="flex min-h-screen">
        <!-- Sidebar -->
        <app-admin-sidebar></app-admin-sidebar>

        <!-- Main Content -->
        <div class="flex-1 ml-20 p-4 xl:py-6 xl:ml-72 xl:pl-6 2xl:pl-16 overflow-y-auto">
            <!-- Header -->
            <div class="flex flex-col xl:flex-row xl:items-center xl:justify-between gap-4 mb-4 xl:mb-4">
                <div>
                    <h1 class="text-sm sm:max-xl:text-lg xl:text-2xl font-bold text-[#172B4D]">Renouvellement</h1>
                    <div class="flex items-center gap-2 mt-2 text-[10px] xl:text-xs text-[#868E96]">
                        <span>Pages</span>
                        <span>
                            <svg width="6" height="10" viewBox="0 0 6 10" fill="none"
                                xmlns="http://www.w3.org/2000/svg">
                                <path
                                    d="M0.634658 1.3869L1.34199 0.680238L5.19466 4.53157C5.25676 4.59328 5.30605 4.66667 5.33968 4.7475C5.37331 4.82833 5.39063 4.91502 5.39063 5.00257C5.39063 5.09012 5.37331 5.17681 5.33968 5.25764C5.30605 5.33847 5.25676 5.41186 5.19466 5.47357L1.34199 9.3269L0.635325 8.62024L4.25132 5.00357L0.634658 1.3869Z"
                                    fill="#333399" />
                            </svg>
                        </span>
                        <span class="text-[10px] xl:text-xs text-[#868E96]">Renouvellement</span>
                    </div>
                </div>
            </div>

            <!-- Stats Cards -->
            <div class="grid grid-cols-1 sm:grid-cols-2 gap-3 xl:gap-4 mb-4 xl:mb-4">
                <!-- Demande de renouvellement Card -->
                <div class="bg-white rounded-lg xl:rounded-xl p-4 mb-4 last:mb-0 sm:mb-0">
                    <div class="flex items-start justify-between mb-3 xl:mb-4">
                        <div>
                            <p class="text-xs 2xl:text-sm text-gray-600 mb-1 xl:mb-2">Demande de renouvellement</p>
                            <h2 class="text-lg xl:text-xl font-bold text-gray-800">{{ stats.demandes.count }}</h2>
                        </div>
                        <div
                            class="w-10 h-10 xl:w-12 xl:h-12 bg-[#D6AB17] rounded-full flex items-center justify-center">
                            <!-- Placeholder SVG Icon -->
                            <svg class="w-4 h-4 xl:w-[18px] xl:h-4" viewBox="0 0 18 16" fill="none"
                                xmlns="http://www.w3.org/2000/svg">
                                <path
                                    d="M0.864408 15.75C0.703991 15.75 0.558158 15.71 0.426907 15.6301C0.295657 15.5502 0.193574 15.4443 0.120658 15.3125C0.0477409 15.1807 0.00778261 15.0383 0.000782609 14.8855C-0.00621739 14.7327 0.0337409 14.5833 0.120658 14.4375L8.21441 0.4375C8.30191 0.291667 8.41507 0.182292 8.55391 0.109375C8.69274 0.0364583 8.83478 0 8.98003 0C9.12528 0 9.26762 0.0364583 9.40703 0.109375C9.54645 0.182292 9.65932 0.291667 9.74566 0.4375L17.8394 14.4375C17.9269 14.5833 17.9672 14.733 17.9602 14.8864C17.9532 15.0398 17.9129 15.1818 17.8394 15.3125C17.7659 15.4432 17.6638 15.549 17.5332 15.6301C17.4025 15.7112 17.2567 15.7512 17.0957 15.75H0.864408ZM2.37378 14H15.5863L8.98003 2.625L2.37378 14ZM8.98003 13.125C9.22795 13.125 9.43591 13.041 9.60391 12.873C9.77191 12.705 9.85562 12.4973 9.85503 12.25C9.85445 12.0027 9.77045 11.795 9.60303 11.627C9.43562 11.459 9.22795 11.375 8.98003 11.375C8.73212 11.375 8.52445 11.459 8.35703 11.627C8.18962 11.795 8.10562 12.0027 8.10503 12.25C8.10445 12.4973 8.18845 12.7053 8.35703 12.8739C8.52562 13.0425 8.73328 13.1262 8.98003 13.125ZM8.98003 10.5C9.22795 10.5 9.43591 10.416 9.60391 10.248C9.77191 10.08 9.85562 9.87233 9.85503 9.625V7C9.85503 6.75208 9.77103 6.54442 9.60303 6.377C9.43503 6.20958 9.22737 6.12558 8.98003 6.125C8.7327 6.12442 8.52503 6.20842 8.35703 6.377C8.18903 6.54558 8.10503 6.75325 8.10503 7V9.625C8.10503 9.87292 8.18903 10.0809 8.35703 10.2489C8.52503 10.4169 8.7327 10.5006 8.98003 10.5Z"
                                    fill="white" />
                            </svg>

                        </div>
                    </div>
                    <div class="flex items-center gap-1 text-red-600 text-[10px] xl:text-xs">
                        <span>↘</span>
                        <span>{{ stats.demandes.change }}</span>
                    </div>
                </div>

                <!-- En cours de renouvellement Card -->
                <div class="bg-white rounded-lg xl:rounded-xl p-4 mb-4 last:mb-0 sm:mb-0">
                    <div class="flex items-start justify-between mb-3 xl:mb-4">
                        <div>
                            <p class="text-xs 2xl:text-sm text-gray-600 mb-1 xl:mb-2">En cours de renouvellement</p>
                            <h2 class="text-lg xl:text-xl font-bold text-gray-800">{{ stats.enCours.count }}</h2>
                        </div>
                        <div
                            class="w-10 h-10 xl:w-12 xl:h-12 bg-gradient-to-br from-[#F5583D] to-[#F54351] rounded-full flex items-center justify-center">
                            <!-- Placeholder SVG Icon -->
                            <svg class="w-5 h-5 xl:w-[21px] xl:h-[21px]" viewBox="0 0 21 21" fill="none"
                                xmlns="http://www.w3.org/2000/svg">
                                <path fill-rule="evenodd" clip-rule="evenodd"
                                    d="M10.7285 0.00248586C9.20075 -0.0307611 7.6842 0.269836 6.28468 0.883291C4.88516 1.49675 3.6364 2.40827 2.62559 3.55424C1.61477 4.7002 0.866258 6.05298 0.432307 7.51813C-0.00164418 8.98328 -0.110576 10.5255 0.113118 12.0371C0.336811 13.5487 0.887739 14.9933 1.72744 16.2699C2.56714 17.5466 3.67537 18.6246 4.97476 19.4287C6.27415 20.2328 7.73339 20.7436 9.2506 20.9254C10.7678 21.1072 12.3064 20.9557 13.759 20.4814C14.0072 20.4003 14.213 20.2239 14.3312 19.9911C14.4493 19.7582 14.4701 19.488 14.389 19.2398C14.3079 18.9916 14.1315 18.7858 13.8987 18.6677C13.6658 18.5495 13.3956 18.5287 13.1474 18.6098C11.5689 19.1252 9.87421 19.1688 8.27127 18.7351C6.66834 18.3015 5.22682 17.4094 4.12348 16.1684C3.02015 14.9274 2.30297 13.3914 2.05991 11.7487C1.81685 10.106 2.05846 8.42812 2.75513 6.92077C3.4518 5.41342 4.57323 4.14214 5.98188 3.26286C7.39054 2.38358 9.02519 1.93451 10.6854 1.97073C12.3455 2.00695 13.959 2.52688 15.328 3.46676C16.697 4.40665 17.7619 5.72562 18.3921 7.26192C18.4912 7.5035 18.6821 7.69585 18.923 7.79664C19.0422 7.84655 19.1701 7.87248 19.2994 7.87295C19.4287 7.87343 19.5568 7.84843 19.6764 7.79939C19.796 7.75036 19.9048 7.67824 19.9966 7.58716C20.0883 7.49608 20.1612 7.38782 20.2111 7.26857C20.2611 7.14931 20.287 7.02139 20.2875 6.89211C20.2879 6.76283 20.2629 6.63473 20.2139 6.51511C19.4382 4.62418 18.1276 3.00073 16.4426 1.84388C14.7577 0.687027 12.7718 0.0470656 10.7285 0.00248586ZM11.4831 4.92174C11.4831 4.66066 11.3794 4.41028 11.1948 4.22568C11.0102 4.04107 10.7598 3.93736 10.4988 3.93736C10.2377 3.93736 9.98732 4.04107 9.80271 4.22568C9.6181 4.41028 9.51439 4.66066 9.51439 4.92174V10.093L6.84477 12.7613C6.74805 12.8514 6.67048 12.9601 6.61668 13.0808C6.56288 13.2016 6.53395 13.3319 6.53162 13.4641C6.52928 13.5963 6.5536 13.7276 6.60311 13.8501C6.65262 13.9727 6.72631 14.0841 6.81978 14.1775C6.91325 14.271 7.0246 14.3447 7.14717 14.3942C7.26974 14.4437 7.40103 14.468 7.5332 14.4657C7.66538 14.4634 7.79572 14.4344 7.91647 14.3806C8.03722 14.3268 8.1459 14.2493 8.23602 14.1525L11.1944 11.1955L11.4831 10.9067V4.92174ZM19.6863 19.6874C19.6863 20.0355 19.548 20.3693 19.3018 20.6154C19.0557 20.8616 18.7219 20.9999 18.3738 20.9999C18.0257 20.9999 17.6918 20.8616 17.4457 20.6154C17.1995 20.3693 17.0613 20.0355 17.0613 19.6874C17.0613 19.3393 17.1995 19.0054 17.4457 18.7593C17.6918 18.5131 18.0257 18.3749 18.3738 18.3749C18.7219 18.3749 19.0557 18.5131 19.3018 18.7593C19.548 19.0054 19.6863 19.3393 19.6863 19.6874ZM19.3581 11.4842C19.3581 11.2232 19.2544 10.9728 19.0698 10.7882C18.8852 10.6036 18.6348 10.4999 18.3738 10.4999C18.1127 10.4999 17.8623 10.6036 17.6777 10.7882C17.4931 10.9728 17.3894 11.2232 17.3894 11.4842V16.078C17.3894 16.3391 17.4931 16.5894 17.6777 16.774C17.8623 16.9587 18.1127 17.0624 18.3738 17.0624C18.6348 17.0624 18.8852 16.9587 19.0698 16.774C19.2544 16.5894 19.3581 16.3391 19.3581 16.078V11.4842Z"
                                    fill="white" />
                            </svg>

                        </div>
                    </div>
                    <div class="flex items-center gap-1 text-emerald-600 text-[10px] xl:text-xs">
                        <span>↗</span>
                        <span>{{ stats.enCours.change }}</span>
                    </div>
                </div>
            </div>

            <!-- Filters and Table -->
            <div class="bg-white rounded-lg xl:rounded-xl shadow-sm overflow-hidden">
                <!-- Search and Filters -->
                <div class="px-3 xl:px-4 py-3 xl:py-4 border-b border-gray-100">
                    <div class="flex flex-col lg:flex-row lg:items-center lg:justify-between gap-3 xl:gap-4">
                        <!-- Search Bar -->
                        <div class="relative flex-1 max-w-sm">
                            <input type="text" placeholder="Rechercher par référence ou intitulé..."
                                class="w-full pl-10 pr-4 py-2.5 border border-gray-200 rounded-lg focus:ring-2 focus:ring-[#0D823B] focus:border-transparent outline-none text-xs 2xl:text-sm bg-white">
                            <!-- Placeholder SVG Search Icon -->
                            <div class="absolute left-3 top-1/2 -translate-y-1/2 text-gray-400">
                                <svg width="14" height="14" viewBox="0 0 14 14" fill="none"
                                    xmlns="http://www.w3.org/2000/svg">
                                    <path
                                        d="M13.1539 12.2073L10.6806 9.75393C11.6407 8.55687 12.1056 7.03747 11.9798 5.50813C11.854 3.9788 11.147 2.55579 10.0043 1.5317C8.86151 0.507604 7.3698 -0.0397263 5.83588 0.00224731C4.30196 0.0442209 2.84241 0.672308 1.75736 1.75736C0.672308 2.84241 0.0442209 4.30196 0.00224731 5.83588C-0.0397263 7.3698 0.507604 8.86151 1.5317 10.0043C2.55579 11.147 3.9788 11.854 5.50813 11.9798C7.03747 12.1056 8.55687 11.6407 9.75393 10.6806L12.2073 13.1339C12.2692 13.1964 12.343 13.246 12.4242 13.2799C12.5055 13.3137 12.5926 13.3311 12.6806 13.3311C12.7686 13.3311 12.8557 13.3137 12.937 13.2799C13.0182 13.246 13.092 13.1964 13.1539 13.1339C13.2741 13.0096 13.3413 12.8435 13.3413 12.6706C13.3413 12.4977 13.2741 12.3316 13.1539 12.2073ZM6.01393 10.6806C5.09095 10.6806 4.1887 10.4069 3.42127 9.89412C2.65384 9.38134 2.0557 8.65251 1.7025 7.79979C1.34929 6.94707 1.25687 6.00876 1.43694 5.10351C1.617 4.19827 2.06146 3.36675 2.7141 2.7141C3.36675 2.06146 4.19827 1.617 5.10351 1.43694C6.00876 1.25687 6.94707 1.34929 7.79979 1.7025C8.65251 2.0557 9.38134 2.65384 9.89412 3.42127C10.4069 4.1887 10.6806 5.09095 10.6806 6.01393C10.6806 7.25161 10.1889 8.43859 9.31376 9.31376C8.43859 10.1889 7.25161 10.6806 6.01393 10.6806Z"
                                        fill="#777777" />
                                </svg>
                            </div>
                        </div>

                        <!-- Filter Buttons -->
                        <div class="flex items-center gap-3">
                            <!-- Status Filter -->
                            <div class="relative filter-dropdown-container">
                                <button (click)="toggleStatusDropdown()"
                                    class="flex items-center gap-2 px-3 xl:px-4 py-2 border border-gray-200 rounded-lg bg-white text-[#172B4D] text-xs 2xl:text-sm hover:bg-gray-50 transition">
                                    <!-- Placeholder SVG Filter Icon -->
                                    <svg class="w-3.5 h-3.5 xl:w-4 xl:h-4" viewBox="0 0 15 16" fill="none"
                                        xmlns="http://www.w3.org/2000/svg">
                                        <path
                                            d="M14.1668 2.16659C14.1668 1.69992 14.1668 1.46659 14.0752 1.28825C13.9955 1.13158 13.8683 1.00412 13.7118 0.924085C13.5335 0.833252 13.3002 0.833252 12.8335 0.833252H2.16683C1.70016 0.833252 1.46683 0.833252 1.2885 0.924085C1.1317 1.00398 1.00422 1.13146 0.92433 1.28825C0.833496 1.46659 0.833496 1.69992 0.833496 2.16659V2.78075C0.833496 2.98492 0.833496 3.08659 0.856829 3.18242C0.877235 3.26774 0.910984 3.3493 0.956829 3.42409C1.00766 3.50742 1.08016 3.57992 1.2235 3.72409L5.44266 7.94242C5.58683 8.08659 5.65933 8.15908 5.71016 8.24242C5.75627 8.31797 5.78961 8.39853 5.81016 8.48408C5.8335 8.57908 5.8335 8.67992 5.8335 8.87908V12.8424C5.8335 13.5566 5.8335 13.9141 5.9835 14.1291C6.04857 14.2221 6.13196 14.3008 6.22854 14.3604C6.32513 14.42 6.43287 14.4593 6.54516 14.4758C6.80433 14.5141 7.12433 14.3549 7.76266 14.0349L8.42933 13.7016C8.69766 13.5683 8.831 13.5016 8.9285 13.4016C9.01498 13.3133 9.08074 13.2068 9.121 13.0899C9.16683 12.9583 9.16683 12.8083 9.16683 12.5091V8.88575C9.16683 8.68159 9.16683 8.57992 9.19016 8.48408C9.21057 8.39877 9.24432 8.31721 9.29016 8.24242C9.34016 8.15908 9.41266 8.08742 9.55433 7.94575L9.55766 7.94242L13.7768 3.72409C13.9202 3.57992 13.9918 3.50742 14.0435 3.42409C14.0896 3.34853 14.1229 3.26797 14.1435 3.18242C14.1668 3.08825 14.1668 2.98659 14.1668 2.78742V2.16659Z"
                                            stroke="#A3AED0" stroke-width="1.66667" stroke-linecap="round"
                                            stroke-linejoin="round" />
                                    </svg>
                                    {{ selectedStatus }}
                                </button>
                                <div *ngIf="showStatusDropdown"
                                    class="absolute top-full left-0 mt-1 bg-white border border-gray-200 rounded-lg shadow-lg z-50 min-w-[220px]">
                                    <button *ngFor="let status of statusOptions" (click)="selectStatus(status)"
                                        [class.bg-blue-50]="selectedStatus === status"
                                        class="w-full text-left px-4 py-2 text-xs hover:bg-gray-50 first:rounded-t-lg last:rounded-b-lg transition-colors">
                                        {{ status }}
                                    </button>
                                </div>
                            </div>
                            <button
                                class="flex items-center gap-2 px-3 xl:px-4 py-2 border border-gray-200 rounded-lg bg-white text-[#172B4D] text-xs 2xl:text-sm hover:bg-gray-50 transition">
                                <!-- Placeholder SVG Export Icon -->
                                <svg class="w-3.5 h-3.5 xl:w-4 xl:h-[18px]" viewBox="0 0 15 18" fill="none"
                                    xmlns="http://www.w3.org/2000/svg">
                                    <path fill-rule="evenodd" clip-rule="evenodd"
                                        d="M0 0.625001C0 0.459241 0.0658481 0.300269 0.183058 0.183059C0.300269 0.065849 0.45924 9.96869e-07 0.625 9.96869e-07H7.5C7.58213 -0.000145687 7.66349 0.0158968 7.73941 0.0472115C7.81534 0.0785261 7.88435 0.124499 7.9425 0.182501L12.3175 4.5575C12.3755 4.61565 12.4215 4.68466 12.4528 4.76059C12.4841 4.83651 12.5001 4.91787 12.5 5V8.125H11.25V5.625H7.5C7.33424 5.625 7.17527 5.55915 7.05806 5.44194C6.94085 5.32473 6.875 5.16576 6.875 5V1.25H1.25V16.25H8.125V17.5H0.625C0.45924 17.5 0.300269 17.4342 0.183058 17.3169C0.0658481 17.1997 0 17.0408 0 16.875V0.625001ZM8.125 2.13375L10.3663 4.375H8.125V2.13375ZM11.6925 10.1838L14.1925 12.6838C14.3097 12.801 14.3755 12.9599 14.3755 13.1256C14.3755 13.2914 14.3097 13.4503 14.1925 13.5675L11.6925 16.0675L10.8075 15.1825L12.2413 13.75H6.25V12.5H12.2413L10.8075 11.0675L11.6925 10.1838Z"
                                        fill="#A3AED0" />
                                </svg>
                                Exporter
                            </button>
                            <!-- View Toggle -->
                            <div class="flex overflow-hidden">
                                <button (click)="setViewMode('list')"
                                    [class]="viewMode === 'list' ? 'p-2 xl:p-3 rounded-sm bg-[#F4F7FE]' : 'p-2 xl:p-3'"
                                    class="hover:bg-gray-50 transition">
                                    <!-- Placeholder SVG List Icon -->
                                    <svg class="w-3.5 h-2.5 xl:w-[14px] xl:h-[10px]" viewBox="0 0 14 10" fill="none"
                                        xmlns="http://www.w3.org/2000/svg"
                                        [attr.fill]="viewMode === 'list' ? '#007BFF' : '#A3AED0'">
                                        <path
                                            d="M0 0.833333C0 0.61232 0.0877975 0.400358 0.244078 0.244078C0.400358 0.0877975 0.61232 0 0.833333 0H1.66667C1.88768 0 2.09964 0.0877975 2.25592 0.244078C2.4122 0.400358 2.5 0.61232 2.5 0.833333C2.5 1.05435 2.4122 1.26631 2.25592 1.42259C2.09964 1.57887 1.88768 1.66667 1.66667 1.66667H0.833333C0.61232 1.66667 0.400358 1.57887 0.244078 1.42259C0.0877975 1.26631 0 1.05435 0 0.833333ZM4.16667 0.833333C4.16667 0.61232 4.25446 0.400358 4.41074 0.244078C4.56702 0.0877975 4.77899 0 5 0H12.5C12.721 0 12.933 0.0877975 13.0893 0.244078C13.2455 0.400358 13.3333 0.61232 13.3333 0.833333C13.3333 1.05435 13.2455 1.26631 13.0893 1.42259C12.933 1.57887 12.721 1.66667 12.5 1.66667H5C4.77899 1.66667 4.56702 1.57887 4.41074 1.42259C4.25446 1.26631 4.16667 1.05435 4.16667 0.833333ZM0 5C0 4.77899 0.0877975 4.56702 0.244078 4.41074C0.400358 4.25446 0.61232 4.16667 0.833333 4.16667H1.66667C1.88768 4.16667 2.09964 4.25446 2.25592 4.41074C2.4122 4.56702 2.5 4.77899 2.5 5C2.5 5.22101 2.4122 5.43297 2.25592 5.58926C2.09964 5.74554 1.88768 5.83333 1.66667 5.83333H0.833333C0.61232 5.83333 0.400358 5.74554 0.244078 5.58926C0.0877975 5.43297 0 5.22101 0 5ZM4.16667 5C4.16667 4.77899 4.25446 4.56702 4.41074 4.41074C4.56702 4.25446 4.77899 4.16667 5 4.16667H12.5C12.721 4.16667 12.933 4.25446 13.0893 4.41074C13.2455 4.56702 13.3333 4.77899 13.3333 5C13.3333 5.22101 13.2455 5.43297 13.0893 5.58926C12.933 5.74554 12.721 5.83333 12.5 5.83333H5C4.77899 5.83333 4.56702 5.74554 4.41074 5.58926C4.25446 5.43297 4.16667 5.22101 4.16667 5ZM0 9.16667C0 8.94565 0.0877975 8.73369 0.244078 8.57741C0.400358 8.42113 0.61232 8.33333 0.833333 8.33333H1.66667C1.88768 8.33333 2.09964 8.42113 2.25592 8.57741C2.4122 8.73369 2.5 8.94565 2.5 9.16667C2.5 9.38768 2.4122 9.59964 2.25592 9.75592C2.09964 9.9122 1.88768 10 1.66667 10H0.833333C0.61232 10 0.400358 9.9122 0.244078 9.75592C0.0877975 9.59964 0 9.38768 0 9.16667ZM4.16667 9.16667C4.16667 8.94565 4.25446 8.73369 4.41074 8.57741C4.56702 8.42113 4.77899 8.33333 5 8.33333H12.5C12.721 8.33333 12.933 8.42113 13.0893 8.57741C13.2455 8.73369 13.3333 8.94565 13.3333 9.16667C13.3333 9.38768 13.2455 9.59964 13.0893 9.75592C12.933 9.9122 12.721 10 12.5 10H5C4.77899 10 4.56702 9.9122 4.41074 9.75592C4.25446 9.59964 4.16667 9.38768 4.16667 9.16667Z" />
                                    </svg>
                                </button>
                                <button (click)="setViewMode('grid')"
                                    [class]="viewMode === 'grid' ? 'p-2 xl:p-3 rounded-sm bg-[#F4F7FE]' : 'p-2 xl:p-3'"
                                    class="hover:bg-gray-50 transition">
                                    <!-- Placeholder SVG Grid Icon -->
                                    <svg class="w-3 h-3 xl:w-[13px] xl:h-[13px]" viewBox="0 0 13 13" fill="none"
                                        xmlns="http://www.w3.org/2000/svg">
                                        <path [attr.fill]="viewMode === 'grid' ? '#007BFF' : '#A3AED0'"
                                            [attr.fill-opacity]="viewMode === 'grid' ? '1' : '0.16'"
                                            d="M4.1 0.5H1.56667C1.28377 0.5 1.01246 0.612381 0.812419 0.812419C0.612381 1.01246 0.5 1.28377 0.5 1.56667V4.1C0.5 4.24008 0.52759 4.37878 0.581195 4.5082C0.6348 4.63761 0.71337 4.7552 0.812419 4.85425C0.911469 4.9533 1.02906 5.03187 1.15847 5.08547C1.28788 5.13908 1.42659 5.16667 1.56667 5.16667H4.1C4.24008 5.16667 4.37878 5.13908 4.5082 5.08547C4.63761 5.03187 4.7552 4.9533 4.85425 4.85425C4.9533 4.7552 5.03187 4.63761 5.08547 4.5082C5.13908 4.37878 5.16667 4.24008 5.16667 4.1V1.56667C5.16667 1.28377 5.05429 1.01246 4.85425 0.812419C4.65421 0.612381 4.3829 0.5 4.1 0.5ZM11.4333 0.5H8.9C8.6171 0.5 8.34579 0.612381 8.14575 0.812419C7.94571 1.01246 7.83333 1.28377 7.83333 1.56667V4.1C7.83333 4.3829 7.94571 4.65421 8.14575 4.85425C8.34579 5.05429 8.6171 5.16667 8.9 5.16667H11.4333C11.7162 5.16667 11.9875 5.05429 12.1876 4.85425C12.3876 4.65421 12.5 4.3829 12.5 4.1V1.56667C12.5 1.28377 12.3876 1.01246 12.1876 0.812419C11.9875 0.612381 11.7162 0.5 11.4333 0.5ZM4.1 7.83333H1.56667C1.28377 7.83333 1.01246 7.94571 0.812419 8.14575C0.612381 8.34579 0.5 8.6171 0.5 8.9V11.4333C0.5 11.7162 0.612381 11.9875 0.812419 12.1876C1.01246 12.3876 1.28377 12.5 1.56667 12.5H4.1C4.3829 12.5 4.65421 12.3876 4.85425 12.1876C5.05429 11.9875 5.16667 11.7162 5.16667 11.4333V8.9C5.16667 8.6171 5.05429 8.34579 4.85425 8.14575C4.65421 7.94571 4.3829 7.83333 4.1 7.83333ZM11.4333 7.83333H8.9C8.6171 7.83333 8.34579 7.94571 8.14575 8.14575C7.94571 8.34579 7.83333 8.6171 7.83333 8.9V11.4333C7.83333 11.7162 7.94571 11.9875 8.14575 12.1876C8.34579 12.3876 8.6171 12.5 8.9 12.5H11.4333C11.7162 12.5 11.9875 12.3876 12.1876 12.1876C12.3876 11.9875 12.5 11.7162 12.5 11.4333V8.9C12.5 8.6171 12.3876 8.34579 12.1876 8.14575C11.9875 7.94571 11.7162 7.83333 11.4333 7.83333Z" />
                                        <path [attr.stroke]="viewMode === 'grid' ? '#007BFF' : '#A3AED0'"
                                            stroke-miterlimit="10" stroke-linejoin="round"
                                            d="M4.1 0.5H1.56667C1.28377 0.5 1.01246 0.612381 0.812419 0.812419C0.612381 1.01246 0.5 1.28377 0.5 1.56667V4.1C0.5 4.24008 0.52759 4.37878 0.581195 4.5082C0.6348 4.63761 0.71337 4.7552 0.812419 4.85425C0.911469 4.9533 1.02906 5.03187 1.15847 5.08547C1.28788 5.13908 1.42659 5.16667 1.56667 5.16667H4.1C4.24008 5.16667 4.37878 5.13908 4.5082 5.08547C4.63761 5.03187 4.7552 4.9533 4.85425 4.85425C4.9533 4.7552 5.03187 4.63761 5.08547 4.5082C5.13908 4.37878 5.16667 4.24008 5.16667 4.1V1.56667C5.16667 1.28377 5.05429 1.01246 4.85425 0.812419C4.65421 0.612381 4.3829 0.5 4.1 0.5ZM11.4333 0.5H8.9C8.6171 0.5 8.34579 0.612381 8.14575 0.812419C7.94571 1.01246 7.83333 1.28377 7.83333 1.56667V4.1C7.83333 4.3829 7.94571 4.65421 8.14575 4.85425C8.34579 5.05429 8.6171 5.16667 8.9 5.16667H11.4333C11.7162 5.16667 11.9875 5.05429 12.1876 4.85425C12.3876 4.65421 12.5 4.3829 12.5 4.1V1.56667C12.5 1.28377 12.3876 1.01246 12.1876 0.812419C11.9875 0.612381 11.7162 0.5 11.4333 0.5ZM4.1 7.83333H1.56667C1.28377 7.83333 1.01246 7.94571 0.812419 8.14575C0.612381 8.34579 0.5 8.6171 0.5 8.9V11.4333C0.5 11.7162 0.612381 11.9875 0.812419 12.1876C1.01246 12.3876 1.28377 12.5 1.56667 12.5H4.1C4.3829 12.5 4.65421 12.3876 4.85425 12.1876C5.05429 11.9875 5.16667 11.7162 5.16667 11.4333V8.9C5.16667 8.6171 5.05429 8.34579 4.85425 8.14575C4.65421 7.94571 4.3829 7.83333 4.1 7.83333ZM11.4333 7.83333H8.9C8.6171 7.83333 8.34579 7.94571 8.14575 8.14575C7.94571 8.34579 7.83333 8.6171 7.83333 8.9V11.4333C7.83333 11.7162 7.94571 11.9875 8.14575 12.1876C8.34579 12.3876 8.6171 12.5 8.9 12.5H11.4333C11.7162 12.5 11.9875 12.3876 12.1876 12.1876C12.3876 11.9875 12.5 11.7162 12.5 11.4333V8.9C12.5 8.6171 12.3876 8.34579 12.1876 8.14575C11.9875 7.94571 11.7162 7.83333 11.4333 7.83333Z" />
                                    </svg>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Table - Desktop -->
                <div *ngIf="viewMode === 'list'" class="overflow-x-auto">
                    <table class="w-full">
                        <thead class="bg-[#F5F7F8] border-b border-gray-200">
                            <tr>
                                <th
                                    class="py-3 px-2 xl:px-3 lg:px-4 text-left text-xs 2xl:text-sm font-semibold text-gray-600">
                                    Bien</th>
                                <th
                                    class="py-3 px-2 xl:px-3 lg:px-4 text-left text-xs 2xl:text-sm font-semibold text-gray-600">
                                    Type</th>
                                <th
                                    class="py-3 px-2 xl:px-3 lg:px-4 text-left text-xs 2xl:text-sm font-semibold text-gray-600">
                                    Date d'émission</th>
                                <th
                                    class="py-3 px-2 xl:px-3 lg:px-4 text-left text-xs 2xl:text-sm font-semibold text-gray-600">
                                    Date d'expiration</th>
                                <th
                                    class="py-3 px-2 xl:px-3 lg:px-4 text-left text-xs 2xl:text-sm font-semibold text-gray-600">
                                    Score</th>
                                <th
                                    class="py-3 px-2 xl:px-3 lg:px-4 text-left text-xs 2xl:text-sm font-semibold text-gray-600">
                                    Statut</th>
                                <th
                                    class="py-3 px-2 xl:px-3 lg:px-4 text-left text-xs 2xl:text-sm font-semibold text-gray-600">
                                    Action</th>
                            </tr>
                        </thead>
                        <tbody class="divide-y divide-gray-200">
                            <tr *ngFor="let item of filteredRenouvellements" class="hover:bg-gray-50 transition-colors">
                                <td class="py-3 xl:py-4 px-2 xl:px-3 lg:px-4 whitespace-nowrap">
                                    <div class="flex items-center gap-3">
                                        <div [ngClass]="item.iconColor"
                                            class="w-8 h-8 xl:w-10 xl:h-10 rounded-lg flex items-center justify-center">
                                            <div class="" [innerHTML]="getBienSvg(item.type)"></div>
                                        </div>
                                        <div>
                                            <div class="text-xs md:text-sm font-medium text-gray-900">{{ item.name }}
                                            </div>
                                            <div class="text-[10px] xl:text-xs text-gray-500">{{ item.id }}</div>
                                        </div>
                                    </div>
                                </td>
                                <td
                                    class="py-3 xl:py-4 px-2 xl:px-3 lg:px-4 whitespace-nowrap text-xs md:text-sm text-gray-700">
                                    {{ item.type }}
                                </td>
                                <td
                                    class="py-3 xl:py-4 px-2 xl:px-3 lg:px-4 whitespace-nowrap text-xs md:text-sm text-gray-700">
                                    {{ item.dateEmission }}
                                </td>
                                <td
                                    class="py-3 xl:py-4 px-2 xl:px-3 lg:px-4 whitespace-nowrap text-xs md:text-sm text-gray-700">
                                    {{ item.dateExpiration }}
                                </td>
                                <td class="py-3 xl:py-4 px-2 xl:px-3 lg:px-4 whitespace-nowrap">
                                    <div class="flex items-center gap-3">
                                        <span class="text-xs md:text-sm font-semibold text-gray-900">{{ item.score
                                            }}%</span>
                                        <div class="flex-1 w-10 xl:w-12 h-2 bg-gray-100 rounded-full overflow-hidden">
                                            <div [ngClass]="item.scoreColor" class="h-full rounded-full transition-all"
                                                [style.width]="getScoreWidth(item.scorePercentage)"></div>
                                        </div>
                                    </div>
                                </td>
                                <td class="py-3 xl:py-4 px-2 xl:px-3 lg:px-4 whitespace-nowrap">
                                    <span [ngClass]="item.statusColor"
                                        class="inline-flex items-center px-2 xl:px-3 py-1 rounded-full text-[10px] xl:text-xs font-medium">
                                        {{ item.status }}
                                    </span>
                                </td>
                                <td class="py-3 xl:py-4 px-2 xl:px-3 lg:px-4 whitespace-nowrap">
                                    <button class="p-1.5 xl:p-2 hover:bg-gray-100 rounded-lg transition-colors"
                                        title="Voir détails">
                                        <svg class="w-4 h-3 xl:w-5 xl:h-3.5 text-gray-600" fill="none"
                                            stroke="currentColor" viewBox="0 0 24 24">
                                            <circle cx="12" cy="12" r="3" stroke-width="2" />
                                            <path stroke-width="2" d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7z" />
                                        </svg>
                                    </button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- Grid View -->
                <div *ngIf="viewMode === 'grid'"
                    class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-3 xl:gap-4 p-4">
                    <div *ngFor="let item of filteredRenouvellements"
                        class="bg-white border border-gray-200 rounded-lg xl:rounded-xl p-4 hover:shadow-md transition-shadow">
                        <!-- Header: Icon, Name/ID, Status -->
                        <div class="flex items-start justify-between mb-3 xl:mb-4">
                            <div class="flex items-center gap-3">
                                <div [ngClass]="item.iconColor"
                                    class="w-10 h-10 xl:w-12 xl:h-12 rounded-lg flex items-center justify-center">
                                    <div [innerHTML]="getBienSvg(item.type)"></div>
                                </div>
                                <div>
                                    <div class="text-sm xl:text-base font-medium text-gray-900">{{ item.name }}</div>
                                    <div class="text-xs md:text-sm text-gray-500">{{ item.id }}</div>
                                </div>
                            </div>
                            <span [ngClass]="item.statusColor"
                                class="inline-flex items-center px-2 xl:px-2.5 py-1 rounded-full text-[10px] xl:text-xs font-medium whitespace-nowrap">
                                {{ item.status }}
                            </span>
                        </div>

                        <!-- Details -->
                        <div class="space-y-2 xl:space-y-3">
                            <div class="flex items-center justify-between text-xs xl:text-sm">
                                <span class="text-gray-600">Type:</span>
                                <span class="font-medium text-gray-900">{{ item.type }}</span>
                            </div>
                            <div class="flex items-center justify-between text-xs xl:text-sm">
                                <span class="text-gray-600">Émission:</span>
                                <span class="font-medium text-gray-900">{{ item.dateEmission }}</span>
                            </div>
                            <div class="flex items-center justify-between text-xs xl:text-sm">
                                <span class="text-gray-600">Expiration:</span>
                                <span class="font-medium text-gray-900">{{ item.dateExpiration }}</span>
                            </div>

                            <!-- Score with Progress Bar -->
                            <div class="pt-2 xl:pt-3 border-t border-gray-100">
                                <div class="flex items-center justify-between mb-2">
                                    <span class="text-xs md:text-sm text-gray-600">Score:</span>
                                    <span class="text-xs md:text-sm font-semibold text-gray-900">{{ item.score
                                        }}%</span>
                                </div>
                                <div class="w-full h-2 bg-gray-100 rounded-full overflow-hidden">
                                    <div [ngClass]="item.scoreColor" class="h-full rounded-full transition-all"
                                        [style.width]="getScoreWidth(item.scorePercentage)"></div>
                                </div>
                            </div>

                            <!-- Action Button -->
                            <button title="Voir détails"
                                class="w-full flex items-center justify-center gap-2 px-3 xl:px-4 py-2 mt-2 xl:mt-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors">
                                <svg class="w-3.5 h-3.5 xl:w-4 xl:h-4 text-gray-600" fill="none" stroke="currentColor"
                                    viewBox="0 0 24 24">
                                    <circle cx="12" cy="12" r="3" stroke-width="2" />
                                    <path stroke-width="2" d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7z" />
                                </svg>
                                <span class="text-xs md:text-sm text-gray-700 font-medium">Voir détails</span>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Pagination -->
                <div
                    class="px-3 xl:px-4 lg:px-6 py-3 xl:py-4 border-t border-gray-200 flex items-center justify-between">
                    <div class="text-xs md:text-sm text-gray-600">
                        Page {{ currentPage }} sur {{ totalPages }}
                    </div>
                    <div class="flex gap-2">
                        <button
                            class="px-3 xl:px-4 py-2 border border-gray-200 rounded-lg text-xs md:text-sm font-medium text-gray-700 hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"
                            [disabled]="currentPage === 1">
                            Précédent
                        </button>
                        <button
                            class="px-3 xl:px-4 py-2 border border-gray-200 rounded-lg text-xs md:text-sm font-medium text-gray-700 hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"
                            [disabled]="currentPage === totalPages">
                            Suivant
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>