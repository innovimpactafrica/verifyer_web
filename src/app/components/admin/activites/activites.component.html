<div class="min-h-screen w-full bg-gradient-to-br from-[#EFF6FF] to-[#F0FDF4]">
    <div class="flex min-h-screen">
        <app-admin-sidebar></app-admin-sidebar>
        <div class="flex-1 ml-72 p-4 md:py-6 lg:p-6 overflow-y-auto">
            <!-- Header -->
            <div class="flex items-start justify-between mb-4">
                <div class="flex items-center gap-3">
                    <!-- Breadcrumb and title -->
                    <div>
                        <h1 class="text-2xl md:text-2xl font-bold text-[#172B4D] mb-2">Pilotage & Statistiques - Activités</h1>
                        <div class="text-xs text-[#868E96] font-light flex items-center space-x-3">
                            <span>Pages</span>
                            <span>
                                <svg width="6" height="10" viewBox="0 0 6 10" fill="none"
                                    xmlns="http://www.w3.org/2000/svg">
                                    <path
                                        d="M0.634658 1.3869L1.34199 0.680238L5.19466 4.53157C5.25676 4.59328 5.30605 4.66667 5.33968 4.7475C5.37331 4.82833 5.39063 4.91502 5.39063 5.00257C5.39063 5.09012 5.37331 5.17681 5.33968 5.25764C5.30605 5.33847 5.25676 5.41186 5.19466 5.47357L1.34199 9.3269L0.635325 8.62024L4.25132 5.00357L0.634658 1.3869Z"
                                        fill="#7B8CA6" />
                                </svg>
                            </span>
                            <span>Statistiques - Activités</span>
                        </div>
                    </div>
                </div>

                <!-- Actions -->
                <div class="flex items-center gap-3">
                    <button
                        class="flex items-center gap-2 px-4 py-3 rounded-lg bg-white text-[#172B4D] text-sm border border-gray-200 hover:bg-gray-50 transition">
                        <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path fill-rule="evenodd" clip-rule="evenodd"
                                d="M4.625 0.875C4.97018 0.875 5.25 1.15482 5.25 1.5V2.75H12.75V1.5C12.75 1.15482 13.0298 0.875 13.375 0.875C13.7202 0.875 14 1.15482 14 1.5V2.75H14.625C16.0057 2.75 17.125 3.86929 17.125 5.25V14.625C17.125 16.0057 16.0057 17.125 14.625 17.125H3.375C1.99429 17.125 0.875 16.0057 0.875 14.625V5.25C0.875 3.86929 1.99429 2.75 3.375 2.75H4V1.5C4 1.15482 4.27982 0.875 4.625 0.875ZM15.875 8.375C15.875 7.68464 15.3154 7.125 14.625 7.125H3.375C2.68464 7.125 2.125 7.68464 2.125 8.375V14.625C2.125 15.3154 2.68464 15.875 3.375 15.875H14.625C15.3154 15.875 15.875 15.3154 15.875 14.625V8.375Z"
                                fill="#777777" />
                        </svg>
                        <span>Trimestre</span>
                        <svg width="12" height="7" viewBox="0 0 12 7" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M1.33331 1L5.99998 5.66667L10.6666 1" stroke="#777777" stroke-width="1.33333"
                                stroke-linecap="round" stroke-linejoin="round" />
                        </svg>
                    </button>

                    <div class="relative">
                        <button (click)="toggleAdvancedFilter()"
                            class="flex items-center gap-2 px-4 py-3 rounded-lg bg-white text-[#172B4D] text-sm border border-gray-200 hover:bg-gray-50 transition">
                            <svg width="18" height="12" viewBox="0 0 18 12" fill="none"
                                xmlns="http://www.w3.org/2000/svg">
                                <path d="M4 6H14M1.5 1H16.5M6.5 11H11.5" stroke="#344054" stroke-width="1.67"
                                    stroke-linecap="round" stroke-linejoin="round" />
                            </svg>
                            <span>Filtrer avancé</span>
                        </button>

                        <!-- Overlay -->
                        <div *ngIf="showAdvancedFilter" (click)="cancelFilters()"
                            class="fixed inset-0 bg-black bg-opacity-50 z-40"></div>

                        <!-- Advanced Filter Dropdown -->
                        <div *ngIf="showAdvancedFilter"
                            class="absolute top-full right-0 mt-2 w-[480px] bg-white rounded-xl border border-gray-200 p-6 z-50 shadow-lg">
                            <h3 class="text-lg font-bold text-[#172B4D] mb-4">Filtre avancé</h3>

                            <div class="grid grid-cols-2 gap-4 mb-6">
                                <!-- Période -->
                                <div>
                                    <label class="block text-sm font-medium text-[#4B4848] mb-2">Période</label>
                                    <div class="relative">
                                        <select
                                            style="appearance: none; -webkit-appearance: none; -moz-appearance: none; background-image: none;"
                                            class="w-full px-4 py-3 border border-gray-200 rounded-lg bg-white text-[#4B4848] cursor-pointer focus:ring-2 focus:ring-[#0D823B] focus:border-transparent outline-none">
                                            <option>Tous</option>
                                            <option>Aujourd'hui</option>
                                            <option>Cette semaine</option>
                                            <option>Ce mois</option>
                                            <option>Cette année</option>
                                        </select>
                                        <div class="absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none">
                                            <svg width="12" height="7" viewBox="0 0 12 7" fill="none"
                                                xmlns="http://www.w3.org/2000/svg">
                                                <path d="M1.33331 1L5.99998 5.66667L10.6666 1" stroke="#777777"
                                                    stroke-width="1.33333" stroke-linecap="round"
                                                    stroke-linejoin="round" />
                                            </svg>
                                        </div>
                                    </div>
                                </div>

                                <!-- Type de bien -->
                                <div>
                                    <label class="block text-sm font-medium text-[#4B4848] mb-2">Type de bien</label>
                                    <div class="relative">
                                        <select
                                            style="appearance: none; -webkit-appearance: none; -moz-appearance: none; background-image: none;"
                                            class="w-full px-4 py-3 border border-gray-200 rounded-lg bg-white text-[#4B4848] cursor-pointer focus:ring-2 focus:ring-[#0D823B] focus:border-transparent outline-none">
                                            <option>Tous</option>
                                            <option>Immobilier</option>
                                            <option>Restaurant</option>
                                            <option>Commerce</option>
                                            <option>Autre</option>
                                        </select>
                                        <div class="absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none">
                                            <svg width="12" height="7" viewBox="0 0 12 7" fill="none"
                                                xmlns="http://www.w3.org/2000/svg">
                                                <path d="M1.33331 1L5.99998 5.66667L10.6666 1" stroke="#777777"
                                                    stroke-width="1.33333" stroke-linecap="round"
                                                    stroke-linejoin="round" />
                                            </svg>
                                        </div>
                                    </div>
                                </div>

                                <!-- Statut de demande -->
                                <div>
                                    <label class="block text-sm font-medium text-[#4B4848] mb-2">Statut de
                                        demande</label>
                                    <div class="relative">
                                        <select
                                            style="appearance: none; -webkit-appearance: none; -moz-appearance: none; background-image: none;"
                                            class="w-full px-4 py-3 border border-gray-200 rounded-lg bg-white text-[#4B4848] cursor-pointer focus:ring-2 focus:ring-[#0D823B] focus:border-transparent outline-none">
                                            <option>Tous</option>
                                            <option>En attente</option>
                                            <option>En cours</option>
                                            <option>Validée</option>
                                            <option>Rejetée</option>
                                        </select>
                                        <div class="absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none">
                                            <svg width="12" height="7" viewBox="0 0 12 7" fill="none"
                                                xmlns="http://www.w3.org/2000/svg">
                                                <path d="M1.33331 1L5.99998 5.66667L10.6666 1" stroke="#777777"
                                                    stroke-width="1.33333" stroke-linecap="round"
                                                    stroke-linejoin="round" />
                                            </svg>
                                        </div>
                                    </div>
                                </div>

                                <!-- Statut du certificat -->
                                <div>
                                    <label class="block text-sm font-medium text-[#4B4848] mb-2">Statut du
                                        certificat</label>
                                    <div class="relative">
                                        <select
                                            style="appearance: none; -webkit-appearance: none; -moz-appearance: none; background-image: none;"
                                            class="w-full px-4 py-3 border border-gray-200 rounded-lg bg-white text-[#4B4848] cursor-pointer focus:ring-2 focus:ring-[#0D823B] focus:border-transparent outline-none">
                                            <option>Tous</option>
                                            <option>Valide</option>
                                            <option>Expiré</option>
                                            <option>En renouvellement</option>
                                        </select>
                                        <div class="absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none">
                                            <svg width="12" height="7" viewBox="0 0 12 7" fill="none"
                                                xmlns="http://www.w3.org/2000/svg">
                                                <path d="M1.33331 1L5.99998 5.66667L10.6666 1" stroke="#777777"
                                                    stroke-width="1.33333" stroke-linecap="round"
                                                    stroke-linejoin="round" />
                                            </svg>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Actions -->
                            <div class="flex justify-end gap-3">
                                <button (click)="cancelFilters()"
                                    class="px-6 py-2.5 rounded-lg border border-gray-200 text-[#172B4D] font-medium hover:bg-gray-50 transition">
                                    Annuler
                                </button>
                                <button (click)="applyFilters()"
                                    class="px-6 py-2.5 rounded-lg bg-[#0D823B] text-white font-medium hover:bg-[#0a6b30] transition">
                                    Appliquer
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Stat Cards -->
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6">
                <!-- Card 1: Demandes -->
                <div class="bg-white rounded-xl p-5 flex items-start justify-between">
                    <div>
                        <p class="text-sm text-[#7B8CA6] mb-2">Demandes</p>
                        <h3 class="text-xl font-bold text-[#172B4D] mb-3">155</h3>
                        <div class="flex items-center gap-1 text-xs">
                            <svg width="10" height="10" viewBox="0 0 10 10" fill="none"
                                xmlns="http://www.w3.org/2000/svg">
                                <path d="M5 9V1M5 1L1 5M5 1L9 5" stroke="#0D823B" stroke-width="1.5"
                                    stroke-linecap="round" stroke-linejoin="round" />
                            </svg>
                            <span class="text-[#0D823B] font-medium">12% vs semaine dernière</span>
                        </div>
                    </div>
                    <div class="w-12 h-12 rounded-full bg-[#3F51B5] bg-opacity-10 flex items-center justify-center">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M8 7V3M16 7V3M7 11H17M5 21H19C20.1046 21 21 20.1046 21 19V7C21 5.89543 20.1046 5 19 5H5C3.89543 5 3 5.89543 3 7V19C3 20.1046 3.89543 21 5 21Z"
                                stroke="#3F51B5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                        </svg>
                    </div>
                </div>

                <!-- Card 2: Taux de certification -->
                <div class="bg-white rounded-xl p-5 flex items-start justify-between">
                    <div>
                        <p class="text-sm text-[#7B8CA6] mb-2">Taux de certification</p>
                        <h3 class="text-xl font-bold text-[#172B4D] mb-3">65%</h3>
                        <div class="flex items-center gap-1 text-xs">
                            <svg width="10" height="10" viewBox="0 0 10 10" fill="none"
                                xmlns="http://www.w3.org/2000/svg">
                                <path d="M5 1V9M5 9L9 5M5 9L1 5" stroke="#EF6B64" stroke-width="1.5"
                                    stroke-linecap="round" stroke-linejoin="round" />
                            </svg>
                            <span class="text-[#EF6B64] font-medium">Taux certif 65%</span>
                        </div>
                    </div>
                    <div class="w-12 h-12 rounded-full bg-[#FF9800] bg-opacity-10 flex items-center justify-center">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M9 12L11 14L15 10M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z"
                                stroke="#FF9800" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                        </svg>
                    </div>
                </div>

                <!-- Card 3: Taux de renouvellement -->
                <div class="bg-white rounded-xl p-5 flex items-start justify-between">
                    <div>
                        <p class="text-sm text-[#7B8CA6] mb-2">Taux de renouvellement</p>
                        <h3 class="text-xl font-bold text-[#172B4D] mb-3">28%</h3>
                        <div class="flex items-center gap-1 text-xs">
                            <svg width="10" height="10" viewBox="0 0 10 10" fill="none"
                                xmlns="http://www.w3.org/2000/svg">
                                <path d="M5 9V1M5 1L1 5M5 1L9 5" stroke="#0D823B" stroke-width="1.5"
                                    stroke-linecap="round" stroke-linejoin="round" />
                            </svg>
                            <span class="text-[#0D823B] font-medium">Délai moyen 3,6j</span>
                        </div>
                    </div>
                    <div class="w-12 h-12 rounded-full bg-[#0D823B] bg-opacity-10 flex items-center justify-center">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M4 4V16C4 17.1046 4.89543 18 6 18H20M8 14L12 10L15 13L20 8"
                                stroke="#0D823B" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                        </svg>
                    </div>
                </div>

                <!-- Card 4: Volume paiements -->
                <div class="bg-white rounded-xl p-5 flex items-start justify-between">
                    <div>
                        <p class="text-sm text-[#7B8CA6] mb-2">Volume paiements</p>
                        <h3 class="text-xl font-bold text-[#172B4D] mb-3">248 000 000 F</h3>
                        <div class="flex items-center gap-1 text-xs">
                            <svg width="10" height="10" viewBox="0 0 10 10" fill="none"
                                xmlns="http://www.w3.org/2000/svg">
                                <path d="M5 9V1M5 1L1 5M5 1L9 5" stroke="#0D823B" stroke-width="1.5"
                                    stroke-linecap="round" stroke-linejoin="round" />
                            </svg>
                            <span class="text-[#0D823B] font-medium">Ticket moyen 210 000 F</span>
                        </div>
                    </div>
                    <div class="w-12 h-12 rounded-full bg-[#0D823B] bg-opacity-10 flex items-center justify-center">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M12 8V12L15 15M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z"
                                stroke="#0D823B" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                        </svg>
                    </div>
                </div>
            </div>

            <!-- Charts Section -->
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6">
                <!-- Line Chart (2 colonnes) -->
                <div class="col-span-1 lg:col-span-2 bg-white rounded-xl p-6">
                    <h2 class="text-lg font-medium text-[#172B4D] mb-4">Évolution des demandes & certificats</h2>
                    <div class="w-full h-[320px]">
                        <canvas baseChart [data]="lineChartData" [options]="lineChartOptions"
                            [type]="lineChartType"></canvas>
                    </div>
                </div>

                <!-- Pie Chart (1 colonne) -->
                <div class="col-span-1 bg-white rounded-xl px-6 py-3 flex flex-col">
                    <h2 class="text-lg font-medium text-[#172B4D] mb-2">Répartition par secteur</h2>
                    <div class="w-full flex items-center justify-center flex-1">
                        <div class="w-full max-w-[280px] h-[220px]">
                            <canvas baseChart [data]="pieChartData" [options]="pieChartOptions"
                                [type]="pieChartType"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
