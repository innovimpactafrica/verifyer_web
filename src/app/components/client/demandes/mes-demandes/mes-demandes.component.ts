import { Component, HostListener } from '@angular/core';
import { CommonModule } from '@angular/common';
import { RouterModule } from '@angular/router';
import { ClientSidebarComponent } from '../../client-sidebar/client-sidebar.component';
import { DomSanitizer, SafeHtml } from '@angular/platform-browser';

// Interfaces
interface StatCard {
    title: string;
    value: string;
    bgColor: string;
    iconSvg: string;
}

interface Demande {
    title: string;
    reference: string;
    type: string;
    date: string;
    status: string;
    statusBg: string;
    statusColor: string;
    iconBg: string;
    iconSvg: string;
}

@Component({
    selector: 'app-mes-demandes',
    standalone: true,
    imports: [CommonModule, RouterModule, ClientSidebarComponent],
    templateUrl: './mes-demandes.component.html',
    styleUrl: './mes-demandes.component.css'
})
export class MesDemandesComponent {

    constructor(private sanitizer: DomSanitizer) { }

    // View mode: 'list' or 'grid'
    viewMode: 'list' | 'grid' = 'list';

    // Filter by status
    selectedStatus: string = 'Tous les status';
    showStatusDropdown: boolean = false;
    statusOptions: string[] = ['Tous les status', 'Soumis', 'En cours', 'Validée', 'Rejetée'];

    // Toggle view mode
    setViewMode(mode: 'list' | 'grid'): void {
        this.viewMode = mode;
    }

    // Toggle status dropdown
    toggleStatusDropdown(): void {
        this.showStatusDropdown = !this.showStatusDropdown;
    }

    // Select status filter
    selectStatus(status: string): void {
        this.selectedStatus = status;
        this.showStatusDropdown = false;
    }

    // Get filtered demandes based on selected status
    get filteredDemandes(): Demande[] {
        if (this.selectedStatus === 'Tous les status') {
            return this.demandes;
        }
        return this.demandes.filter(demande => demande.status === this.selectedStatus);
    }

    // Statistics Cards Data
    public statsCards: StatCard[] = [
        {
            title: 'Soumis',
            value: '04',
            bgColor: 'bg-[#274B9B]',
            iconSvg: `<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4.97991 1C4.90497 1.00011 4.83101 1.01706 4.7635 1.0496C4.696 1.08214 4.63667 1.12944 4.58991 1.188L1.53991 5H5.99991C6.13252 5 6.25969 5.05268 6.35346 5.14645C6.44723 5.24021 6.49991 5.36739 6.49991 5.5C6.49991 5.89782 6.65794 6.27936 6.93925 6.56066C7.22055 6.84196 7.60208 7 7.99991 7C8.39773 7 8.77926 6.84196 9.06057 6.56066C9.34187 6.27936 9.49991 5.89782 9.49991 5.5C9.49991 5.36739 9.55259 5.24021 9.64635 5.14645C9.74012 5.05268 9.8673 5 9.99991 5H14.4599L11.4099 1.188C11.3631 1.12944 11.3038 1.08214 11.2363 1.0496C11.1688 1.01706 11.0948 1.00011 11.0199 1H4.97991ZM14.9339 6H10.4499C10.3351 6.56514 10.0285 7.07324 9.58204 7.43819C9.13553 7.80314 8.57659 8.00251 7.99991 8.00251C7.42323 8.00251 6.86428 7.80314 6.41778 7.43819C5.97127 7.07324 5.66467 6.56514 5.54991 6H1.06591L1.38591 8.562C1.40106 8.68325 1.46008 8.79475 1.55184 8.87545C1.64359 8.95615 1.76172 9.00045 1.88391 9H14.1179C14.2398 8.99997 14.3574 8.95544 14.4487 8.87479C14.5401 8.79413 14.5988 8.68291 14.6139 8.562L14.9339 6ZM3.80891 0.563C3.94951 0.38724 4.12785 0.245373 4.33074 0.147914C4.53362 0.050454 4.75583 -9.92793e-05 4.98091 1.46375e-07H11.0189C11.244 -9.92793e-05 11.4662 0.050454 11.6691 0.147914C11.872 0.245373 12.0503 0.38724 12.1909 0.563L15.8909 5.188C15.9325 5.24018 15.9632 5.30015 15.9812 5.36439C15.9992 5.42862 16.0042 5.49581 15.9959 5.562L15.6059 8.686C15.5606 9.04889 15.3842 9.38271 15.11 9.62469C14.8358 9.86667 14.4826 10.0001 14.1169 10H1.88291C1.5172 10.0001 1.16403 9.86667 0.889823 9.62469C0.615615 9.38271 0.439256 9.04889 0.393907 8.686L0.00390735 5.562C-0.00428891 5.49574 0.000867769 5.42851 0.0190732 5.36428C0.0372786 5.30004 0.068164 5.24011 0.109907 5.188L3.80891 0.563ZM0.124907 11.17C0.171762 11.1167 0.229438 11.0739 0.294097 11.0446C0.358755 11.0153 0.428915 11.0001 0.499907 11H5.99991C6.13252 11 6.25969 11.0527 6.35346 11.1464C6.44723 11.2402 6.49991 11.3674 6.49991 11.5C6.49991 11.8978 6.65794 12.2794 6.93925 12.5607C7.22055 12.842 7.60208 13 7.99991 13C8.39773 13 8.77926 12.842 9.06057 12.5607C9.34187 12.2794 9.49991 11.8978 9.49991 11.5C9.49991 11.3674 9.55259 11.2402 9.64635 11.1464C9.74012 11.0527 9.8673 11 9.99991 11H15.4999C15.5708 11 15.6409 11.0151 15.7055 11.0443C15.7701 11.0734 15.8277 11.116 15.8746 11.1691C15.9216 11.2223 15.9566 11.2848 15.9775 11.3525C15.9984 11.4203 16.0047 11.4917 15.9959 11.562L15.6059 14.686C15.5606 15.0489 15.3842 15.3827 15.11 15.6247C14.8358 15.8667 14.4826 16.0001 14.1169 16H1.88291C1.5172 16.0001 1.16403 15.8667 0.889823 15.6247C0.615615 15.3827 0.439256 15.0489 0.393907 14.686L0.00390735 11.562C-0.00493837 11.4917 0.00127556 11.4202 0.0221368 11.3525C0.0429981 11.2847 0.0780298 11.2222 0.124907 11.169V11.17ZM1.06591 12L1.38591 14.562C1.40104 14.6831 1.45992 14.7944 1.55146 14.8751C1.64301 14.9558 1.76089 15.0002 1.88291 15H14.1169C14.2388 15 14.3564 14.9554 14.4477 14.8748C14.5391 14.7941 14.5978 14.6829 14.6129 14.562L14.9329 12H10.4499C10.3351 12.5651 10.0285 13.0732 9.58204 13.4382C9.13553 13.8031 8.57659 14.0025 7.99991 14.0025C7.42323 14.0025 6.86428 13.8031 6.41778 13.4382C5.97127 13.0732 5.66467 12.5651 5.54991 12H1.06591Z" fill="white" /></svg>`
        },
        {
            title: 'En attente',
            value: '02',
            bgColor: 'bg-[#D6AB17]',
            iconSvg: `<svg width="20" height="21" viewBox="0 0 20 21" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M18 1.5C18 2.32812 17.8828 3.13281 17.6484 3.91406C17.4141 4.69531 17.0586 5.43359 16.582 6.12891C16.3398 6.48047 16.0859 6.80078 15.8203 7.08984C15.5547 7.37891 15.2734 7.64062 14.9766 7.875C14.6797 8.10938 14.3594 8.33203 14.0156 8.54297C13.6719 8.75391 13.3125 8.94531 12.9375 9.11719C12.6484 9.25 12.4219 9.42969 12.2578 9.65625C12.0938 9.88281 12.0078 10.1641 12 10.5C12 10.8281 12.082 11.1055 12.2461 11.332C12.4102 11.5586 12.6406 11.7422 12.9375 11.8828C13.3203 12.0625 13.6797 12.2539 14.0156 12.457C14.3516 12.6602 14.668 12.8789 14.9648 13.1133C15.2617 13.3477 15.5469 13.6133 15.8203 13.9102C16.0938 14.207 16.3477 14.5273 16.582 14.8711C17.0508 15.5586 17.4023 16.293 17.6367 17.0742C17.8711 17.8555 17.9922 18.6641 18 19.5H19.5V21H0V19.5H1.5C1.5 18.6719 1.61719 17.8672 1.85156 17.0859C2.08594 16.3047 2.44141 15.5664 2.91797 14.8711C3.16797 14.5039 3.42578 14.1797 3.69141 13.8984C3.95703 13.6172 4.23438 13.3555 4.52344 13.1133C4.8125 12.8711 5.12891 12.6562 5.47266 12.4688C5.81641 12.2812 6.17969 12.0898 6.5625 11.8945C6.84375 11.7617 7.07031 11.5781 7.24219 11.3438C7.41406 11.1094 7.5 10.8281 7.5 10.5C7.5 10.1719 7.41797 9.89453 7.25391 9.66797C7.08984 9.44141 6.85938 9.25781 6.5625 9.11719C6.17969 8.9375 5.82031 8.74609 5.48438 8.54297C5.14844 8.33984 4.83203 8.12109 4.53516 7.88672C4.23828 7.65234 3.95312 7.38672 3.67969 7.08984C3.40625 6.79297 3.15234 6.47266 2.91797 6.12891C2.44922 5.44141 2.09766 4.70703 1.86328 3.92578C1.62891 3.14453 1.50781 2.33594 1.5 1.5H0V0H19.5V1.5H18ZM10.5 10.5C10.5 9.85938 10.668 9.30469 11.0039 8.83594C11.3398 8.36719 11.7891 7.99609 12.3516 7.72266C12.5781 7.61328 12.7969 7.50781 13.0078 7.40625C13.2188 7.30469 13.4258 7.17578 13.6289 7.01953C14.082 6.70703 14.4844 6.34766 14.8359 5.94141C15.1875 5.53516 15.4883 5.09375 15.7383 4.61719C15.9883 4.14062 16.1758 3.64062 16.3008 3.11719C16.4258 2.59375 16.4922 2.05469 16.5 1.5H3C3 2.04688 3.0625 2.58203 3.1875 3.10547C3.3125 3.62891 3.5 4.12891 3.75 4.60547C4 5.08203 4.30078 5.52344 4.65234 5.92969C5.00391 6.33594 5.41016 6.69922 5.87109 7.01953C6.07422 7.16797 6.28125 7.29297 6.49219 7.39453C6.70312 7.49609 6.92188 7.60547 7.14844 7.72266C7.71094 7.99609 8.16016 8.36719 8.49609 8.83594C8.83203 9.30469 9 9.85938 9 10.5C9 11.1406 8.83203 11.6953 8.49609 12.1641C8.16016 12.6328 7.71094 13.0039 7.14844 13.2773C6.92188 13.3867 6.70312 13.4922 6.49219 13.5938C6.28125 13.6953 6.07422 13.8242 5.87109 13.9805C5.41797 14.293 5.01562 14.6523 4.66406 15.0586C4.3125 15.4648 4.01172 15.9062 3.76172 16.3828C3.51172 16.8594 3.32422 17.3594 3.19922 17.8828C3.07422 18.4062 3.00781 18.9453 3 19.5H16.5C16.5 18.9531 16.4375 18.418 16.3125 17.8945C16.1875 17.3711 16 16.8711 15.75 16.3945C15.5 15.918 15.1992 15.4766 14.8477 15.0703C14.4961 14.6641 14.0898 14.3008 13.6289 13.9805C13.4258 13.832 13.2188 13.707 13.0078 13.6055C12.7969 13.5039 12.5781 13.3945 12.3516 13.2773C11.7891 13.0039 11.3398 12.6328 11.0039 12.1641C10.668 11.6953 10.5 11.1406 10.5 10.5Z" fill="white" /></svg>`
        },
        {
            title: 'Validés',
            value: '01',
            bgColor: 'bg-[#0D823B]',
            iconSvg: `<svg width="16" height="12" viewBox="0 0 16 12" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M5.28846 8.775L13.7635 0.3C13.9635 0.1 14.1968 0 14.4635 0C14.7301 0 14.9635 0.1 15.1635 0.3C15.3635 0.5 15.4635 0.737667 15.4635 1.013C15.4635 1.28833 15.3635 1.52567 15.1635 1.725L5.98846 10.925C5.78846 11.125 5.55513 11.225 5.28846 11.225C5.02179 11.225 4.78846 11.125 4.58846 10.925L0.288462 6.625C0.0884617 6.425 -0.00753846 6.18767 0.000461538 5.913C0.00846154 5.63833 0.112795 5.40067 0.313461 5.2C0.514128 4.99933 0.751795 4.89933 1.02646 4.9C1.30113 4.90067 1.53846 5.00067 1.73846 5.2L5.28846 8.775Z" fill="white" /></svg>`
        },
        {
            title: 'Rejetés',
            value: '8',
            bgColor: 'bg-[#F54351]',
            iconSvg: `<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12.75 6.75L6.75 12.75M6.75 6.75L12.75 12.75M5.555 1.219C5.91 0.865 6.201 0.75 6.687 0.75H12.813C13.299 0.75 13.591 0.865 13.945 1.219L18.281 5.555C18.635 5.909 18.75 6.201 18.75 6.687V12.813C18.75 13.313 18.625 13.601 18.281 13.945L13.945 18.281C13.591 18.635 13.299 18.75 12.813 18.75H6.687C6.187 18.75 5.899 18.625 5.555 18.281L1.22 13.945C0.865 13.59 0.75 13.299 0.75 12.813V6.687C0.75 6.187 0.875 5.899 1.219 5.555L5.555 1.219Z" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" /></svg>`
        }
    ];

    // Demandes Data
    public demandes: Demande[] = [
        {
            title: 'Appartement A',
            reference: 'DEM-006',
            type: 'Immobilier',
            date: '15/05/2023',
            status: 'Soumis',
            statusBg: 'bg-gray-100',
            statusColor: 'text-gray-700',
            iconBg: 'bg-[#0D823B0D]',
            iconSvg: `<svg width="22" height="21" viewBox="0 0 22 21" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M20.75 19.7501H0.750031M0.750031 8.7501L8.87603 2.2501C9.40796 1.82459 10.0689 1.59277 10.75 1.59277C11.4312 1.59277 12.0921 1.82459 12.624 2.2501L20.75 8.7501" stroke="#0D823B" stroke-width="1.5" stroke-linecap="round" /><path opacity="0.5" d="M14.25 3.25V1.25C14.25 1.11739 14.3027 0.990215 14.3965 0.896447C14.4902 0.802679 14.6174 0.75 14.75 0.75H17.25C17.3826 0.75 17.5098 0.802679 17.6036 0.896447C17.6974 0.990215 17.75 1.11739 17.75 1.25V6.25" stroke="#0D823B" stroke-width="1.5" stroke-linecap="round" /><path d="M2.75003 19.75V7.25M18.75 19.75V7.25" stroke="#0D823B" stroke-width="1.5" stroke-linecap="round" /><path opacity="0.5" d="M13.75 19.75V14.75C13.75 13.336 13.75 12.629 13.31 12.19C12.872 11.75 12.165 11.75 10.75 11.75C9.33503 11.75 8.62903 11.75 8.19003 12.19C7.75003 12.628 7.75003 13.335 7.75003 14.75V19.75M12.75 7.25C12.75 7.78043 12.5393 8.28914 12.1642 8.66421C11.7892 9.03929 11.2805 9.25 10.75 9.25C10.2196 9.25 9.71089 9.03929 9.33582 8.66421C8.96074 8.28914 8.75003 7.78043 8.75003 7.25C8.75003 6.71957 8.96074 6.21086 9.33582 5.83579C9.71089 5.46071 10.2196 5.25 10.75 5.25C11.2805 5.25 11.7892 5.46071 12.1642 5.83579C12.5393 6.21086 12.75 6.71957 12.75 7.25Z" stroke="#0D823B" stroke-width="1.5" /></svg>`
        },
        {
            title: 'Villa A',
            reference: 'DEM-005',
            type: 'Immobilier',
            date: '10/03/2023',
            status: 'Validée',
            statusBg: 'bg-[#0D823B0D]',
            statusColor: 'text-[#16A34A]',
            iconBg: 'bg-[#0D823B0D]',
            iconSvg: `<svg width="22" height="21" viewBox="0 0 22 21" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M20.75 19.7501H0.750031M0.750031 8.7501L8.87603 2.2501C9.40796 1.82459 10.0689 1.59277 10.75 1.59277C11.4312 1.59277 12.0921 1.82459 12.624 2.2501L20.75 8.7501" stroke="#0D823B" stroke-width="1.5" stroke-linecap="round" /><path opacity="0.5" d="M14.25 3.25V1.25C14.25 1.11739 14.3027 0.990215 14.3965 0.896447C14.4902 0.802679 14.6174 0.75 14.75 0.75H17.25C17.3826 0.75 17.5098 0.802679 17.6036 0.896447C17.6974 0.990215 17.75 1.11739 17.75 1.25V6.25" stroke="#0D823B" stroke-width="1.5" stroke-linecap="round" /><path d="M2.75003 19.75V7.25M18.75 19.75V7.25" stroke="#0D823B" stroke-width="1.5" stroke-linecap="round" /><path opacity="0.5" d="M13.75 19.75V14.75C13.75 13.336 13.75 12.629 13.31 12.19C12.872 11.75 12.165 11.75 10.75 11.75C9.33503 11.75 8.62903 11.75 8.19003 12.19C7.75003 12.628 7.75003 13.335 7.75003 14.75V19.75M12.75 7.25C12.75 7.78043 12.5393 8.28914 12.1642 8.66421C11.7892 9.03929 11.2805 9.25 10.75 9.25C10.2196 9.25 9.71089 9.03929 9.33582 8.66421C8.96074 8.28914 8.75003 7.78043 8.75003 7.25C8.75003 6.71957 8.96074 6.21086 9.33582 5.83579C9.71089 5.46071 10.2196 5.25 10.75 5.25C11.2805 5.25 11.7892 5.46071 12.1642 5.83579C12.5393 6.21086 12.75 6.71957 12.75 7.25Z" stroke="#0D823B" stroke-width="1.5" /></svg>`
        },
        {
            title: 'Restaurant Le Saloum',
            reference: 'DEM-003',
            type: 'Restaurant',
            date: '05/12/2022',
            status: 'En cours',
            statusBg: 'bg-[#D6AB170F]',
            statusColor: 'text-[#D6AB17]',
            iconBg: 'bg-[#6F42C10F]',
            iconSvg: `<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#clip0_93_4230)"><path d="M1.79655 1.49194L13.31 13.0054C13.5285 13.2239 13.6512 13.5202 13.6512 13.8291C13.6512 14.1381 13.5285 14.4344 13.31 14.6529C13.0915 14.8713 12.7952 14.9939 12.4862 14.9939C12.1773 14.9939 11.881 14.8713 11.6625 14.6529L8.84999 11.7919C8.66594 11.605 8.56268 11.3533 8.56249 11.091V10.9182C8.56252 10.7857 8.53623 10.6546 8.48516 10.5324C8.43409 10.4102 8.35925 10.2994 8.26499 10.2063L7.90187 9.87101C7.7786 9.75726 7.62869 9.67635 7.46596 9.63572C7.30323 9.59509 7.13288 9.59605 6.97062 9.63851C6.71473 9.70529 6.44583 9.704 6.1906 9.63476C5.93537 9.56553 5.70268 9.43076 5.51562 9.24382L2.84593 6.57382C1.26218 4.99007 0.679367 2.59851 1.79655 1.49194Z" stroke="#6F42C1" stroke-linejoin="round" /><path d="M12.5 1L10.0859 3.41406C9.90018 3.59979 9.75282 3.82029 9.65229 4.06297C9.55175 4.30565 9.50001 4.56576 9.50001 4.82844V5.29281C9.50002 5.35851 9.48708 5.42357 9.46193 5.48427C9.43678 5.54497 9.39992 5.60012 9.35345 5.64656L9.00001 6M10 7L10.3534 6.64656C10.3999 6.60009 10.455 6.56322 10.5157 6.53808C10.5764 6.51293 10.6415 6.49999 10.7072 6.5H11.1716C11.4343 6.5 11.6944 6.44826 11.937 6.34772C12.1797 6.24718 12.4002 6.09983 12.5859 5.91406L15 3.5M13.75 2.25L11.25 4.75M6.25001 11.5L3.13376 14.6337C2.89935 14.8681 2.58146 14.9997 2.25001 14.9997C1.91855 14.9997 1.60067 14.8681 1.36626 14.6337C1.13192 14.3993 1.00027 14.0815 1.00027 13.75C1.00027 13.4185 1.13192 13.1007 1.36626 12.8663L4.00001 10.25" stroke="#6F42C1" stroke-linecap="round" stroke-linejoin="round" /></g><defs><clipPath id="clip0_93_4230"><rect width="16" height="16" fill="white" /></clipPath></defs></svg>`
        },
        {
            title: 'Hôtel du Parc',
            reference: 'DEM-002',
            type: 'Hôtel',
            date: '20/10/2022',
            status: 'En cours',
            statusBg: 'bg-[#D6AB170F]',
            statusColor: 'text-[#D6AB17]',
            iconBg: 'bg-[#FD7E140F]',
            iconSvg: `<svg width="22" height="15" viewBox="0 0 22 15" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M0 15V0H2V10H10V2H18C19.1 2 20.0417 2.39167 20.825 3.175C21.6083 3.95833 22 4.9 22 6V15H20V12H2V15H0ZM6 9C5.16667 9 4.45833 8.70833 3.875 8.125C3.29167 7.54167 3 6.83333 3 6C3 5.16667 3.29167 4.45833 3.875 3.875C4.45833 3.29167 5.16667 3 6 3C6.83333 3 7.54167 3.29167 8.125 3.875C8.70833 4.45833 9 5.16667 9 6C9 6.83333 8.70833 7.54167 8.125 8.125C7.54167 8.70833 6.83333 9 6 9ZM12 10H20V6C20 5.45 19.8043 4.97933 19.413 4.588C19.0217 4.19667 18.5507 4.00067 18 4H12V10ZM6 7C6.28333 7 6.521 6.904 6.713 6.712C6.905 6.52 7.00067 6.28267 7 6C6.99933 5.71733 6.90333 5.48 6.712 5.288C6.52067 5.096 6.28333 5 6 5C5.71667 5 5.47933 5.096 5.288 5.288C5.09667 5.48 5.00067 5.71733 5 6C4.99933 6.28267 5.09533 6.52033 5.288 6.713C5.48067 6.90567 5.718 7.00133 6 7Z" fill="#FD7E14" /></svg>`
        },
        {
            title: 'Menuiserie Ndiambour',
            reference: 'DEM-001',
            type: 'Artisan',
            date: '15/08/2022',
            status: 'Rejetée',
            statusBg: 'bg-[#F543510F]',
            statusColor: 'text-[#F54351]',
            iconBg: 'bg-[#274B9B14]',
            iconSvg: `<svg width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M0.737625 8.57304e-05C0.725082 -0.000103941 0.712537 2.11305e-05 0.7 0.000460763C0.5535 0.00536701 0.452687 0.0546482 0.383969 0.123367C0.292344 0.214992 0.235219 0.363648 0.271844 0.601648C0.308531 0.839648 0.449438 1.15646 0.749094 1.50605C2.87078 3.98137 4.90331 6.3673 6.48981 8.13012C6.87334 8.55624 7.23022 8.94509 7.55622 9.29056C7.93419 8.29362 8.63653 7.59855 9.52191 7.26821C9.18362 6.94949 8.80516 6.60218 8.39075 6.22921C6.628 4.64271 4.242 2.61012 1.76672 0.488429C1.41716 0.188742 1.10031 0.047867 0.862313 0.0111795C0.821044 0.00470782 0.779388 0.00100159 0.737625 8.57304e-05ZM12.4598 0.0326795C12.4502 0.0325754 12.441 0.0328149 12.4324 0.0333982C12.3633 0.037992 12.3281 0.0538358 12.2894 0.092492L11.4276 0.954367L13.1512 2.67793L14.013 1.81605C14.0517 1.77743 14.0675 1.74224 14.0721 1.67312C14.0768 1.60405 14.0605 1.5033 14.0157 1.38674C13.926 1.15362 13.7258 0.865898 13.4827 0.622836C13.2397 0.379773 12.9519 0.179555 12.7188 0.089867C12.6168 0.0506483 12.527 0.0333045 12.4598 0.0326795H12.4598ZM11.0298 1.35205L10.7205 1.66146L11.0298 1.97077L11.4276 2.36855L11.7369 2.67787L12.1347 3.07565L12.444 3.38502L12.7534 3.07565L11.0298 1.35205ZM10.3228 2.05918L7.59184 4.79012L7.91894 5.08174L10.6321 2.36855L10.3228 2.05918ZM11.0298 2.76634L8.33947 5.45665L8.66662 5.74824L11.3392 3.07565L11.0298 2.76634ZM11.737 3.47334L9.08716 6.12318L9.41431 6.4148L12.0464 3.78274L11.7371 3.47337H11.737V3.47334ZM5.05397 7.32802L1.30719 11.0749L1.6165 11.3842L5.34594 7.65474L5.05397 7.32802ZM9.98084 7.70762C9.02894 7.94596 8.31709 8.61962 7.99309 9.74568C8.16972 9.92646 8.33547 10.0921 8.48622 10.2365C8.72309 10.4635 8.92672 10.643 9.08653 10.7664C9.14206 10.2281 9.40044 9.73324 9.76294 9.36984C10.0942 9.03771 10.5284 8.80715 10.9856 8.77321C10.8647 8.62209 10.7 8.43727 10.4972 8.22562C10.346 8.0679 10.1717 7.89365 9.98084 7.70762ZM5.72137 8.07474L2.01422 11.7818L2.32359 12.0913L6.01344 8.40146L5.72137 8.07474ZM6.38891 8.82143L2.72137 12.489L3.03063 12.7983L6.68094 9.14815L6.38891 8.82143ZM11.0856 9.33102C10.7607 9.3353 10.4315 9.49602 10.1611 9.76712C9.80059 10.1285 9.57756 10.6687 9.65278 11.1953C9.81947 12.3622 10.395 13.2518 11.1984 13.7339C11.9087 14.16 12.8063 14.2761 13.8123 13.9521C13.0553 13.8268 12.3599 12.9926 12.3061 12.3693C12.6383 12.7698 13.0542 13.1364 13.5069 13.3615C13.1981 12.656 13.2194 11.9411 13.1604 11.3515C13.1182 10.9289 13.0388 10.5708 12.8049 10.2526C12.5709 9.93452 12.1667 9.6339 11.4067 9.38059C11.3032 9.3461 11.1947 9.32934 11.0856 9.33102ZM1.01213 11.5753L1.01203 11.5753L1.01209 11.5754L1.01213 11.5753ZM1.01209 11.5754L0.633438 12.5223L1.58319 13.4721L2.53022 13.0934L2.32366 12.8867L1.92578 12.489L1.61647 12.1797L1.21866 11.782L1.01209 11.5754ZM0.406 13.0906L0 14.1054L1.01494 13.6994L0.406 13.0906Z" fill="#274B9B" /></svg>`
        }
    ];

    // Close dropdown when clicking outside
    @HostListener('document:click', ['$event'])
    onDocumentClick(event: MouseEvent): void {
        const target = event.target as HTMLElement;
        if (!target.closest('.relative')) {
            this.showStatusDropdown = false;
        }
    }

    // Utility Methods
    getSafeHtml(html: string): SafeHtml {
        return this.sanitizer.bypassSecurityTrustHtml(html);
    }
}
