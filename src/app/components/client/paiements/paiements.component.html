<div class="min-h-screen w-full bg-gradient-to-br from-[#EFF6FF] to-[#F0FDF4]">
    <div class="flex min-h-screen">
        <app-client-sidebar></app-client-sidebar>
        <div class="flex-1 ml-20 p-4 md:max-xl:ml-64 md:py-6 xl:ml-72 xl:pl-6 2xl:pl-16 overflow-y-auto">
            <!-- Header -->
            <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-4">
                <div>
                    <h1 class="text-sm sm:max-md:text-lg md:text-2xl font-bold text-[#172B4D]">Paiements</h1>
                    <div class="flex items-center gap-2 mt-2 text-xs text-[#868E96]">
                        <span>Pages</span>
                        <span>
                            <svg width="6" height="10" viewBox="0 0 6 10" fill="none"
                                xmlns="http://www.w3.org/2000/svg">
                                <path
                                    d="M0.634658 1.3869L1.34199 0.680238L5.19466 4.53157C5.25676 4.59328 5.30605 4.66667 5.33968 4.7475C5.37331 4.82833 5.39063 4.91502 5.39063 5.00257C5.39063 5.09012 5.37331 5.17681 5.33968 5.25764C5.30605 5.33847 5.25676 5.41186 5.19466 5.47357L1.34199 9.3269L0.635325 8.62024L4.25132 5.00357L0.634658 1.3869Z"
                                    fill="#333399" />
                            </svg>
                        </span>
                        <span class="text-xs text-[#868E96]">Paiements</span>
                    </div>
                </div>
            </div>

            <!-- Statistics Cards -->
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 mb-4">
                <div *ngFor="let card of statsCards" class="bg-white rounded-xl p-4 border border-gray-100">
                    <div class="flex items-start justify-between">
                        <div>
                            <p class="text-xs font-medium text-[#8392AB] mb-1">{{ card.title }}</p>
                            <h3 class="text-lg font-bold text-[#172B4D]">{{ card.value }}</h3>
                        </div>
                        <div
                            [class]="'w-10 h-10 md:w-12 md:h-12 rounded-full flex items-center justify-center ' + card.bgColor">
                            <div [innerHTML]="getSafeHtml(card.iconSvg)"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Liste des paiements -->
            <div class="bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden">
                <div class="px-3 md:px-4 lg:px-6 py-4 border-b border-gray-100">
                    <div class="flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4">
                        <!-- Search Bar -->
                        <div class="relative flex-1 max-w-full lg:max-w-sm">
                            <input type="text" placeholder="Rechercher par référence ou intitulé..."
                                class="w-full pl-10 pr-4 py-2.5 border border-gray-200 rounded-lg focus:ring-2 focus:ring-[#0D823B] focus:border-transparent outline-none text-sm bg-white">
                            <!-- Placeholder SVG Search Icon -->
                            <div class="absolute left-3 top-1/2 -translate-y-1/2 text-gray-400">
                                <svg width="14" height="14" viewBox="0 0 14 14" fill="none"
                                    xmlns="http://www.w3.org/2000/svg">
                                    <path
                                        d="M13.1539 12.2073L10.6806 9.75393C11.6407 8.55687 12.1056 7.03747 11.9798 5.50813C11.854 3.9788 11.147 2.55579 10.0043 1.5317C8.86151 0.507604 7.3698 -0.0397263 5.83588 0.00224731C4.30196 0.0442209 2.84241 0.672308 1.75736 1.75736C0.672308 2.84241 0.0442209 4.30196 0.00224731 5.83588C-0.0397263 7.3698 0.507604 8.86151 1.5317 10.0043C2.55579 11.147 3.9788 11.854 5.50813 11.9798C7.03747 12.1056 8.55687 11.6407 9.75393 10.6806L12.2073 13.1339C12.2692 13.1964 12.343 13.246 12.4242 13.2799C12.5055 13.3137 12.5926 13.3311 12.6806 13.3311C12.7686 13.3311 12.8557 13.3137 12.937 13.2799C13.0182 13.246 13.092 13.1964 13.1539 13.1339C13.2741 13.0096 13.3413 12.8435 13.3413 12.6706C13.3413 12.4977 13.2741 12.3316 13.1539 12.2073ZM6.01393 10.6806C5.09095 10.6806 4.1887 10.4069 3.42127 9.89412C2.65384 9.38134 2.0557 8.65251 1.7025 7.79979C1.34929 6.94707 1.25687 6.00876 1.43694 5.10351C1.617 4.19827 2.06146 3.36675 2.7141 2.7141C3.36675 2.06146 4.19827 1.617 5.10351 1.43694C6.00876 1.25687 6.94707 1.34929 7.79979 1.7025C8.65251 2.0557 9.38134 2.65384 9.89412 3.42127C10.4069 4.1887 10.6806 5.09095 10.6806 6.01393C10.6806 7.25161 10.1889 8.43859 9.31376 9.31376C8.43859 10.1889 7.25161 10.6806 6.01393 10.6806Z"
                                        fill="#777777" />
                                </svg>
                            </div>
                        </div>

                        <!-- Filter Buttons -->
                        <div class="flex flex-wrap items-center gap-2 md:gap-3">
                            <div class="relative">
                                <button (click)="toggleStatusDropdown()"
                                    class="flex items-center gap-1.5 md:gap-2 px-3 md:px-4 py-2 border border-gray-200 rounded-lg bg-white text-[#172B4D] text-xs 2xl:text-sm hover:bg-gray-50 transition">
                                    <!-- Placeholder SVG Filter Icon -->
                                    <svg width="15" height="16" viewBox="0 0 15 16" fill="none"
                                        xmlns="http://www.w3.org/2000/svg">
                                        <path
                                            d="M14.1668 2.16659C14.1668 1.69992 14.1668 1.46659 14.0752 1.28825C13.9955 1.13158 13.8683 1.00412 13.7118 0.924085C13.5335 0.833252 13.3002 0.833252 12.8335 0.833252H2.16683C1.70016 0.833252 1.46683 0.833252 1.2885 0.924085C1.1317 1.00398 1.00422 1.13146 0.92433 1.28825C0.833496 1.46659 0.833496 1.69992 0.833496 2.16659V2.78075C0.833496 2.98492 0.833496 3.08659 0.856829 3.18242C0.877235 3.26774 0.910984 3.3493 0.956829 3.42409C1.00766 3.50742 1.08016 3.57992 1.2235 3.72409L5.44266 7.94242C5.58683 8.08659 5.65933 8.15908 5.71016 8.24242C5.75627 8.31797 5.78961 8.39853 5.81016 8.48408C5.8335 8.57908 5.8335 8.67992 5.8335 8.87908V12.8424C5.8335 13.5566 5.8335 13.9141 5.9835 14.1291C6.04857 14.2221 6.13196 14.3008 6.22854 14.3604C6.32513 14.42 6.43287 14.4593 6.54516 14.4758C6.80433 14.5141 7.12433 14.3549 7.76266 14.0349L8.42933 13.7016C8.69766 13.5683 8.831 13.5016 8.9285 13.4016C9.01498 13.3133 9.08074 13.2068 9.121 13.0899C9.16683 12.9583 9.16683 12.8083 9.16683 12.5091V8.88575C9.16683 8.68159 9.16683 8.57992 9.19016 8.48408C9.21057 8.39877 9.24432 8.31721 9.29016 8.24242C9.34016 8.15908 9.41266 8.08742 9.55433 7.94575L9.55766 7.94242L13.7768 3.72409C13.9202 3.57992 13.9918 3.50742 14.0435 3.42409C14.0896 3.34853 14.1229 3.26797 14.1435 3.18242C14.1668 3.08825 14.1668 2.98659 14.1668 2.78742V2.16659Z"
                                            stroke="#A3AED0" stroke-width="1.66667" stroke-linecap="round"
                                            stroke-linejoin="round" />
                                    </svg>
                                    <span class="hidden sm:inline">{{ selectedStatus }}</span>
                                </button>

                                <!-- Dropdown Menu -->
                                <div *ngIf="showStatusDropdown"
                                    class="absolute top-full left-0 mt-2 w-48 bg-white border border-gray-200 rounded-lg shadow-lg z-50">
                                    <div class="py-1">
                                        <button *ngFor="let status of statusOptions" (click)="selectStatus(status)"
                                            [class.bg-blue-50]="selectedStatus === status"
                                            [class.text-blue-600]="selectedStatus === status"
                                            class="w-full text-left px-4 py-2 text-xs 2xl:text-sm text-gray-700 hover:bg-gray-50 transition">
                                            {{ status }}
                                        </button>
                                    </div>
                                </div>
                            </div>
                            <button
                                class="flex items-center gap-1.5 md:gap-2 px-3 md:px-4 py-2 border border-gray-200 rounded-lg bg-white text-[#172B4D] text-xs 2xl:text-sm hover:bg-gray-50 transition">
                                <!-- Placeholder SVG Export Icon -->
                                <svg width="15" height="18" viewBox="0 0 15 18" fill="none"
                                    xmlns="http://www.w3.org/2000/svg">
                                    <path fill-rule="evenodd" clip-rule="evenodd"
                                        d="M0 0.625001C0 0.459241 0.0658481 0.300269 0.183058 0.183059C0.300269 0.065849 0.45924 9.96869e-07 0.625 9.96869e-07H7.5C7.58213 -0.000145687 7.66349 0.0158968 7.73941 0.0472115C7.81534 0.0785261 7.88435 0.124499 7.9425 0.182501L12.3175 4.5575C12.3755 4.61565 12.4215 4.68466 12.4528 4.76059C12.4841 4.83651 12.5001 4.91787 12.5 5V8.125H11.25V5.625H7.5C7.33424 5.625 7.17527 5.55915 7.05806 5.44194C6.94085 5.32473 6.875 5.16576 6.875 5V1.25H1.25V16.25H8.125V17.5H0.625C0.45924 17.5 0.300269 17.4342 0.183058 17.3169C0.0658481 17.1997 0 17.0408 0 16.875V0.625001ZM8.125 2.13375L10.3663 4.375H8.125V2.13375ZM11.6925 10.1838L14.1925 12.6838C14.3097 12.801 14.3755 12.9599 14.3755 13.1256C14.3755 13.2914 14.3097 13.4503 14.1925 13.5675L11.6925 16.0675L10.8075 15.1825L12.2413 13.75H6.25V12.5H12.2413L10.8075 11.0675L11.6925 10.1838Z"
                                        fill="#A3AED0" />
                                </svg>
                                <span class="hidden sm:inline">Exporter</span>
                            </button>
                            <!-- View Toggle -->
                            <div class="hidden md:flex overflow-hidden">
                                <button (click)="setViewMode('list')"
                                    [class]="viewMode === 'list' ? 'p-3 rounded-sm bg-[#F4F7FE]' : 'p-3'"
                                    class="hover:bg-gray-50 transition">
                                    <!-- Placeholder SVG List Icon -->
                                    <svg width="14" height="10" viewBox="0 0 14 10" fill="none"
                                        xmlns="http://www.w3.org/2000/svg"
                                        [attr.fill]="viewMode === 'list' ? '#007BFF' : '#A3AED0'">
                                        <path
                                            d="M0 0.833333C0 0.61232 0.0877975 0.400358 0.244078 0.244078C0.400358 0.0877975 0.61232 0 0.833333 0H1.66667C1.88768 0 2.09964 0.0877975 2.25592 0.244078C2.4122 0.400358 2.5 0.61232 2.5 0.833333C2.5 1.05435 2.4122 1.26631 2.25592 1.42259C2.09964 1.57887 1.88768 1.66667 1.66667 1.66667H0.833333C0.61232 1.66667 0.400358 1.57887 0.244078 1.42259C0.0877975 1.26631 0 1.05435 0 0.833333ZM4.16667 0.833333C4.16667 0.61232 4.25446 0.400358 4.41074 0.244078C4.56702 0.0877975 4.77899 0 5 0H12.5C12.721 0 12.933 0.0877975 13.0893 0.244078C13.2455 0.400358 13.3333 0.61232 13.3333 0.833333C13.3333 1.05435 13.2455 1.26631 13.0893 1.42259C12.933 1.57887 12.721 1.66667 12.5 1.66667H5C4.77899 1.66667 4.56702 1.57887 4.41074 1.42259C4.25446 1.26631 4.16667 1.05435 4.16667 0.833333ZM0 5C0 4.77899 0.0877975 4.56702 0.244078 4.41074C0.400358 4.25446 0.61232 4.16667 0.833333 4.16667H1.66667C1.88768 4.16667 2.09964 4.25446 2.25592 4.41074C2.4122 4.56702 2.5 4.77899 2.5 5C2.5 5.22101 2.4122 5.43297 2.25592 5.58926C2.09964 5.74554 1.88768 5.83333 1.66667 5.83333H0.833333C0.61232 5.83333 0.400358 5.74554 0.244078 5.58926C0.0877975 5.43297 0 5.22101 0 5ZM4.16667 5C4.16667 4.77899 4.25446 4.56702 4.41074 4.41074C4.56702 4.25446 4.77899 4.16667 5 4.16667H12.5C12.721 4.16667 12.933 4.25446 13.0893 4.41074C13.2455 4.56702 13.3333 4.77899 13.3333 5C13.3333 5.22101 13.2455 5.43297 13.0893 5.58926C12.933 5.74554 12.721 5.83333 12.5 5.83333H5C4.77899 5.83333 4.56702 5.74554 4.41074 5.58926C4.25446 5.43297 4.16667 5.22101 4.16667 5ZM0 9.16667C0 8.94565 0.0877975 8.73369 0.244078 8.57741C0.400358 8.42113 0.61232 8.33333 0.833333 8.33333H1.66667C1.88768 8.33333 2.09964 8.42113 2.25592 8.57741C2.4122 8.73369 2.5 8.94565 2.5 9.16667C2.5 9.38768 2.4122 9.59964 2.25592 9.75592C2.09964 9.9122 1.88768 10 1.66667 10H0.833333C0.61232 10 0.400358 9.9122 0.244078 9.75592C0.0877975 9.59964 0 9.38768 0 9.16667ZM4.16667 9.16667C4.16667 8.94565 4.25446 8.73369 4.41074 8.57741C4.56702 8.42113 4.77899 8.33333 5 8.33333H12.5C12.721 8.33333 12.933 8.42113 13.0893 8.57741C13.2455 8.73369 13.3333 8.94565 13.3333 9.16667C13.3333 9.38768 13.2455 9.59964 13.0893 9.75592C12.933 9.9122 12.721 10 12.5 10H5C4.77899 10 4.56702 9.9122 4.41074 9.75592C4.25446 9.59964 4.16667 9.38768 4.16667 9.16667Z" />
                                    </svg>
                                </button>
                                <button (click)="setViewMode('grid')"
                                    [class]="viewMode === 'grid' ? 'p-3 rounded-sm bg-[#F4F7FE]' : 'p-3'"
                                    class="hover:bg-gray-50 transition">
                                    <!-- Placeholder SVG Grid Icon -->
                                    <svg width="13" height="13" viewBox="0 0 13 13" fill="none"
                                        xmlns="http://www.w3.org/2000/svg">
                                        <path [attr.fill]="viewMode === 'grid' ? '#007BFF' : '#A3AED0'"
                                            [attr.fill-opacity]="viewMode === 'grid' ? '1' : '0.16'"
                                            d="M4.1 0.5H1.56667C1.28377 0.5 1.01246 0.612381 0.812419 0.812419C0.612381 1.01246 0.5 1.28377 0.5 1.56667V4.1C0.5 4.24008 0.52759 4.37878 0.581195 4.5082C0.6348 4.63761 0.71337 4.7552 0.812419 4.85425C0.911469 4.9533 1.02906 5.03187 1.15847 5.08547C1.28788 5.13908 1.42659 5.16667 1.56667 5.16667H4.1C4.24008 5.16667 4.37878 5.13908 4.5082 5.08547C4.63761 5.03187 4.7552 4.9533 4.85425 4.85425C4.9533 4.7552 5.03187 4.63761 5.08547 4.5082C5.13908 4.37878 5.16667 4.24008 5.16667 4.1V1.56667C5.16667 1.28377 5.05429 1.01246 4.85425 0.812419C4.65421 0.612381 4.3829 0.5 4.1 0.5ZM11.4333 0.5H8.9C8.6171 0.5 8.34579 0.612381 8.14575 0.812419C7.94571 1.01246 7.83333 1.28377 7.83333 1.56667V4.1C7.83333 4.3829 7.94571 4.65421 8.14575 4.85425C8.34579 5.05429 8.6171 5.16667 8.9 5.16667H11.4333C11.7162 5.16667 11.9875 5.05429 12.1876 4.85425C12.3876 4.65421 12.5 4.3829 12.5 4.1V1.56667C12.5 1.28377 12.3876 1.01246 12.1876 0.812419C11.9875 0.612381 11.7162 0.5 11.4333 0.5ZM4.1 7.83333H1.56667C1.28377 7.83333 1.01246 7.94571 0.812419 8.14575C0.612381 8.34579 0.5 8.6171 0.5 8.9V11.4333C0.5 11.7162 0.612381 11.9875 0.812419 12.1876C1.01246 12.3876 1.28377 12.5 1.56667 12.5H4.1C4.3829 12.5 4.65421 12.3876 4.85425 12.1876C5.05429 11.9875 5.16667 11.7162 5.16667 11.4333V8.9C5.16667 8.6171 5.05429 8.34579 4.85425 8.14575C4.65421 7.94571 4.3829 7.83333 4.1 7.83333ZM11.4333 7.83333H8.9C8.6171 7.83333 8.34579 7.94571 8.14575 8.14575C7.94571 8.34579 7.83333 8.6171 7.83333 8.9V11.4333C7.83333 11.7162 7.94571 11.9875 8.14575 12.1876C8.34579 12.3876 8.6171 12.5 8.9 12.5H11.4333C11.7162 12.5 11.9875 12.3876 12.1876 12.1876C12.3876 11.9875 12.5 11.7162 12.5 11.4333V8.9C12.5 8.6171 12.3876 8.34579 12.1876 8.14575C11.9875 7.94571 11.7162 7.83333 11.4333 7.83333Z" />
                                        <path [attr.stroke]="viewMode === 'grid' ? '#007BFF' : '#A3AED0'"
                                            stroke-miterlimit="10" stroke-linejoin="round"
                                            d="M4.1 0.5H1.56667C1.28377 0.5 1.01246 0.612381 0.812419 0.812419C0.612381 1.01246 0.5 1.28377 0.5 1.56667V4.1C0.5 4.24008 0.52759 4.37878 0.581195 4.5082C0.6348 4.63761 0.71337 4.7552 0.812419 4.85425C0.911469 4.9533 1.02906 5.03187 1.15847 5.08547C1.28788 5.13908 1.42659 5.16667 1.56667 5.16667H4.1C4.24008 5.16667 4.37878 5.13908 4.5082 5.08547C4.63761 5.03187 4.7552 4.9533 4.85425 4.85425C4.9533 4.7552 5.03187 4.63761 5.08547 4.5082C5.13908 4.37878 5.16667 4.24008 5.16667 4.1V1.56667C5.16667 1.28377 5.05429 1.01246 4.85425 0.812419C4.65421 0.612381 4.3829 0.5 4.1 0.5ZM11.4333 0.5H8.9C8.6171 0.5 8.34579 0.612381 8.14575 0.812419C7.94571 1.01246 7.83333 1.28377 7.83333 1.56667V4.1C7.83333 4.3829 7.94571 4.65421 8.14575 4.85425C8.34579 5.05429 8.6171 5.16667 8.9 5.16667H11.4333C11.7162 5.16667 11.9875 5.05429 12.1876 4.85425C12.3876 4.65421 12.5 4.3829 12.5 4.1V1.56667C12.5 1.28377 12.3876 1.01246 12.1876 0.812419C11.9875 0.612381 11.7162 0.5 11.4333 0.5ZM4.1 7.83333H1.56667C1.28377 7.83333 1.01246 7.94571 0.812419 8.14575C0.612381 8.34579 0.5 8.6171 0.5 8.9V11.4333C0.5 11.7162 0.612381 11.9875 0.812419 12.1876C1.01246 12.3876 1.28377 12.5 1.56667 12.5H4.1C4.3829 12.5 4.65421 12.3876 4.85425 12.1876C5.05429 11.9875 5.16667 11.7162 5.16667 11.4333V8.9C5.16667 8.6171 5.05429 8.34579 4.85425 8.14575C4.65421 7.94571 4.3829 7.83333 4.1 7.83333ZM11.4333 7.83333H8.9C8.6171 7.83333 8.34579 7.94571 8.14575 8.14575C7.94571 8.34579 7.83333 8.6171 7.83333 8.9V11.4333C7.83333 11.7162 7.94571 11.9875 8.14575 12.1876C8.34579 12.3876 8.6171 12.5 8.9 12.5H11.4333C11.7162 12.5 11.9875 12.3876 12.1876 12.1876C12.3876 11.9875 12.5 11.7162 12.5 11.4333V8.9C12.5 8.6171 12.3876 8.34579 12.1876 8.14575C11.9875 7.94571 11.7162 7.83333 11.4333 7.83333Z" />
                                    </svg>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- List View (Table) -->
                <div *ngIf="viewMode === 'list'" class="overflow-x-auto">
                    <table class="w-full min-w-[600px]">
                        <thead>
                            <tr class="border-b border-gray-100 bg-[#F5F7F8]">
                                <th
                                    class="text-left py-2 md:py-3 px-2 md:px-3 lg:px-4 text-xs 2xl:text-sm font-medium text-[#2C3E50] w-[40%]">
                                    Intitulé</th>
                                <th
                                    class="text-left py-2 md:py-3 px-2 md:px-3 lg:px-4 text-xs 2xl:text-sm font-medium text-[#2C3E50]">
                                    Montant ( Fcfa)</th>
                                <th
                                    class="text-left py-2 md:py-3 px-2 md:px-3 lg:px-4 text-xs 2xl:text-sm font-medium text-[#2C3E50]">
                                    Date</th>
                                <th
                                    class="text-left py-2 md:py-3 px-2 md:px-3 lg:px-4 text-xs 2xl:text-sm font-medium text-[#2C3E50]">
                                    Statut</th>
                                <th
                                    class="text-left py-2 md:py-3 px-2 md:px-3 lg:px-4 text-xs 2xl:text-sm font-medium text-[#2C3E50]">
                                    Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let p of filteredPaiements"
                                class="border-b border-gray-50 hover:bg-gray-50 transition">
                                <td class="py-3 md:py-4 px-2 md:px-3 lg:px-4">
                                    <div class="flex items-center gap-2 md:gap-3 min-w-0">
                                        <div
                                            [class]="'w-8 h-8 md:w-10 md:h-10 rounded-lg flex items-center justify-center flex-shrink-0 ' + getMethodeBgClass(p.methode)">
                                            <div [innerHTML]="getMethodeIconSvg(p.methode)"></div>
                                        </div>
                                        <div class="min-w-0 flex-1">
                                            <div class="font-semibold text-[#172B4D] text-xs md:text-sm truncate">{{
                                                p.intitule }}</div>
                                            <div class="text-xs text-[#6B7280] truncate">{{ p.ref }}</div>
                                        </div>
                                    </div>
                                </td>
                                <td
                                    class="py-3 md:py-4 px-2 md:px-3 lg:px-4 text-xs md:text-sm font-medium text-[#4B4848]">
                                    {{ p.montant }}</td>
                                <td
                                    class="py-3 md:py-4 px-2 md:px-3 lg:px-4 text-xs md:text-sm text-[#4B4848] whitespace-nowrap">
                                    {{ p.date }}</td>
                                <td class="py-3 md:py-4 px-2 md:px-3 lg:px-4">
                                    <span
                                        class="px-2 md:px-3 py-1 rounded-full text-xs whitespace-nowrap bg-[#0D823B0D] text-[#16A34A]">{{
                                        p.statut }}</span>
                                </td>
                                <td class="py-3 md:py-4 px-2 md:px-3 lg:px-4">
                                    <div class="flex items-center gap-1.5 md:gap-2">
                                        <button class="text-[#0D823B] hover:text-[#0A6B2F] flex-shrink-0">
                                            <!-- Placeholder download svg -->
                                            <svg width="14" height="14" viewBox="0 0 14 14" fill="none"
                                                xmlns="http://www.w3.org/2000/svg">
                                                <path
                                                    d="M7 10.577L3.461 7.039L4.169 6.319L6.5 8.65V0H7.5V8.65L9.83 6.32L10.539 7.039L7 10.577ZM1.616 14C1.15533 14 0.771 13.846 0.463 13.538C0.155 13.23 0.000666667 12.8453 0 12.384V9.961H1V12.384C1 12.538 1.064 12.6793 1.192 12.808C1.32 12.9367 1.461 13.0007 1.615 13H12.385C12.5383 13 12.6793 12.936 12.808 12.808C12.9367 12.68 13.0007 12.5387 13 12.384V9.961H14V12.384C14 12.8447 13.846 13.229 13.538 13.537C13.23 13.845 12.8453 13.9993 12.384 14H1.616Z"
                                                    fill="#0D823B" />
                                            </svg>

                                        </button>
                                        <div class="text-xs text-[#0D823B] hidden sm:block">
                                            <p>Télécharger</p>
                                        </div>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- Grid View -->
                <div *ngIf="viewMode === 'grid'" class="p-4 md:p-6">
                    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4">
                        <div *ngFor="let p of filteredPaiements"
                            class="bg-white rounded-xl border border-gray-100 p-4 hover:shadow-md transition-shadow">
                            <!-- Header: Icon and Status -->
                            <div class="flex items-start justify-between mb-3">
                                <div
                                    [class]="'w-12 h-12 rounded-lg flex items-center justify-center ' + getMethodeBgClass(p.methode)">
                                    <div [innerHTML]="getMethodeIconSvg(p.methode)"></div>
                                </div>
                                <span
                                    class="px-2 py-1 rounded-full text-[10px] whitespace-nowrap bg-[#0D823B0D] text-[#16A34A]">{{
                                    p.statut }}</span>
                            </div>

                            <!-- Intitulé and Reference -->
                            <div class="mb-3">
                                <h3 class="font-semibold text-sm text-[#172B4D] mb-1">{{ p.intitule }}</h3>
                                <p class="text-xs text-[#6B7280]">{{ p.ref }}</p>
                            </div>

                            <!-- Montant -->
                            <div class="mb-3 pb-3 border-b border-gray-100">
                                <p class="text-xs text-[#6B7280] mb-1">Montant</p>
                                <p class="text-lg font-semibold text-[#4B4848]">{{ p.montant }}</p>
                            </div>

                            <!-- Date -->
                            <div class="mb-4">
                                <p class="text-xs text-[#6B7280] mb-1">Date</p>
                                <p class="text-sm text-[#4B4848]">{{ p.date }}</p>
                            </div>

                            <!-- Action -->
                            <button [routerLink]="['/detail-paiement-facturation', p.ref]"
                                class="w-full py-2.5 px-4 border border-gray-200 bg-white text-[#0D823B] rounded-lg text-sm font-medium hover:bg-gray-50 transition flex items-center justify-center gap-2">
                                <svg width="14" height="14" viewBox="0 0 14 14" fill="none"
                                    xmlns="http://www.w3.org/2000/svg">
                                    <path
                                        d="M7 10.577L3.461 7.039L4.169 6.319L6.5 8.65V0H7.5V8.65L9.83 6.32L10.539 7.039L7 10.577ZM1.616 14C1.15533 14 0.771 13.846 0.463 13.538C0.155 13.23 0.000666667 12.8453 0 12.384V9.961H1V12.384C1 12.538 1.064 12.6793 1.192 12.808C1.32 12.9367 1.461 13.0007 1.615 13H12.385C12.5383 13 12.6793 12.936 12.808 12.808C12.9367 12.68 13.0007 12.5387 13 12.384V9.961H14V12.384C14 12.8447 13.846 13.229 13.538 13.537C13.23 13.845 12.8453 13.9993 12.384 14H1.616Z"
                                        fill="#0D823B" />
                                </svg>
                                Télécharger
                            </button>
                        </div>
                    </div>
                </div>

                <div class="px-3 md:px-4 lg:px-6 py-3 md:py-4 border-t border-gray-100">
                    <div class="flex flex-col sm:flex-row items-center justify-between gap-3 md:gap-4">
                        <p class="text-xs md:text-sm text-[#4B4848]">Page <span class="text-[#172B4D]">1</span> sur
                            <span class="text-[#172B4D]">10</span>
                        </p>
                        <div class="flex gap-2">
                            <button
                                class="px-3 md:px-4 py-2 border border-gray-300 rounded-lg text-xs md:text-sm font-medium text-[#172B4D] bg-white hover:bg-gray-50 transition disabled:opacity-50 disabled:cursor-not-allowed"
                                disabled>Précédent</button>
                            <button
                                class="px-3 md:px-4 py-2 border border-gray-300 rounded-lg text-xs md:text-sm font-medium text-[#172B4D] bg-white hover:bg-gray-50 transition">Suivant</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>